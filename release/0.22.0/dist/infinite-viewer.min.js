/*
Copyright (c) Daybrush
name: infinite-viewer
license: MIT
author: Daybrush
repository: git+https://github.com/daybrush/infinite-viewer.git
version: 0.22.0
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).InfiniteViewer=e()}(this,function(){"use strict";var R=function(t,e){return(R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}R(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var c=function(){return(c=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function W(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||((o=o||Array.prototype.slice.call(e,0,i))[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))}var B="function",F=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],s={cm:function(t){return 96*t/2.54},mm:function(t){return 96*t/254},in:function(t){return 96*t},pt:function(t){return 96*t/72},pc:function(t){return 96*t/6},"%":function(t,e){return t*e/100},vw:function(t,e){return t/100*(e=void 0===e?window.innerWidth:e)},vh:function(t,e){return t/100*(e=void 0===e?window.innerHeight:e)},vmax:function(t,e){return t/100*(e=void 0===e?Math.max(window.innerWidth,window.innerHeight):e)},vmin:function(t,e){return t/100*(e=void 0===e?Math.min(window.innerWidth,window.innerHeight):e)}};function a(t){return t&&"object"==typeof t}function g(t){return Array.isArray(t)}function L(t,e,n,o,i){if(m(t,e,n))return n;for(var r,s=t,a=e,l=o,c=i,h=n+1;h<l;++h){var u=function(t){var e,n,o=a[t].trim();return o!==s.close||m(s,a,t)?(e=t,-1===(e=(n=w(c,function(t){return t.open===o}))?L(n,a,t,l,c):e)?(r=t,"break"):void(r=t=e)):{value:t}}(h);if(h=r,"object"==typeof u)return u.value;if("break"===u)break}return-1}function m(t,e,n){return t.ignore?(e=e.slice(Math.max(n-3,0),n+3).join(""),new RegExp(t.ignore).exec(e)):null}function j(r,t){var t="string"==typeof t?{separator:t}:t,e=t.separator,s=void 0===e?",":e,a=t.isSeparateFirst,l=t.isSeparateOnlyOpenClose,e=t.isSeparateOpenClose,c=void 0===e?l:e,e=t.openCloseCharacters,h=void 0===e?F:e,t=h.map(function(t){var e=t.open,t=t.close;return e===t?e:e+"|"+t}).join("|"),e=new RegExp("(\\s*"+s+"\\s*|"+t+"|\\s+)","g"),u=r.split(e).filter(Boolean),p=u.length,f=[],v=[];function g(){return v.length&&(f.push(v.join("")),v=[])}for(var d,n=function(t){var e=u[t].trim(),n=t,o=w(h,function(t){return t.open===e}),i=w(h,function(t){return t.close===e});if(o){if(-1!==(n=L(o,u,t,p,h))&&c)return g()&&a||(f.push(u.slice(t,n+1).join("")),t=n,a)?(d=t,"break"):(d=t,"continue")}else{if(i&&!m(i,u,t))return(o=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var o=Array(t),i=0,e=0;e<n;e++)for(var r=arguments[e],s=0,a=r.length;s<a;s++,i++)o[i]=r[s];return o}(h)).splice(h.indexOf(i),1),{value:j(r,{separator:s,isSeparateFirst:a,isSeparateOnlyOpenClose:l,isSeparateOpenClose:c,openCloseCharacters:o})};if(i=e,!((""!==(o=s)&&" "!=o||""!==i&&" "!=i)&&i!==o||l))return g(),a?(d=t,"break"):(d=t,"continue")}v.push(u.slice(t,(n=-1===n?p-1:n)+1).join("")),d=t=n},o=0;o<p;++o){var i=n(o),o=d;if("object"==typeof i)return i.value;if("break"===i)break}return v.length&&f.push(v.join("")),f}function H(){return Date.now?Date.now():(new Date).getTime()}function Z(t,e,n){void 0===n&&(n=-1);for(var o=t.length,i=0;i<o;++i)if(e(t[i],i,t))return i;return n}function w(t,e,n){e=Z(t,e);return-1<e?t[e]:n}function d(t,e){var n=(t=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t=t))?(n=t[1],o=t[2],{prefix:n,unit:t[3],value:parseFloat(o)}):{prefix:"",unit:"",value:NaN},t=n.value,o=n.unit;if(a(e)){var i=e[o];if(i){if(typeof i===B)return i(t);if(s[o])return s[o](t,i)}}else if("%"===o)return t*e/100;return s[o]?s[o](t):t}function _(t,e,n){return Math.max(e,Math.min(t,n))}function h(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function S(t,e,n,o){t.addEventListener(e,n,o)}function E(t,e,n,o){t.removeEventListener(e,n,o)}var V=function(){return(V=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};var t=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(t,e){if(a(t))for(var n in t)this.on(n,t[n]);else this._addEvent(t,e,{});return this},e.off=function(t,e){if(t)if(a(t))for(var n in t)this.off(n);else{var o,i;e?(o=this._events[t])&&-1<(i=Z(o,function(t){return t.listener===e}))&&o.splice(i,1):this._events[t]=[]}else this._events={};return this},e.once=function(e,t){var n=this;return t&&this._addEvent(e,t,{once:!0}),new Promise(function(t){n._addEvent(e,t,{once:!0})})},e.emit=function(e,n){var t,o=this,i=(void 0===n&&(n={}),this._events[e]);return!e||!i||(t=!1,n.eventType=e,n.stop=function(){t=!0},n.currentTarget=this,function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var o=Array(t),i=0,e=0;e<n;e++)for(var r=arguments[e],s=0,a=r.length;s<a;s++,i++)o[i]=r[s];return o}(i).forEach(function(t){t.listener(n),t.once&&o.off(e,t.listener)}),!t)},e.trigger=function(t,e){return this.emit(t,e=void 0===e?{}:e)},e._addEvent=function(t,e,n){var o=this._events;o[t]=o[t]||[],o[t].push(V({listener:e},n))},t}(),q=function(t,e){return(q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var b=function(){return(b=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function e(t){return 180*(e=[t[0].clientX,t[0].clientY],t=[t[1].clientX,t[1].clientY],n=t[0]-e[0],t=t[1]-e[1],(0<=(e=Math.atan2(t,n))?e:e+2*Math.PI)/Math.PI);var e,n}function z(t){if(!t)return[];if(t.touches){for(var e=t.touches,n=Math.min(e.length,2),o=[],i=0;i<n;++i)o.push(N(e[i]));return o}return[N(t)]}function I(t,e,n){var o=n.length,t=l(t,o),i=t.clientX,r=t.clientY,s=t.originalClientX,t=t.originalClientY,e=l(e,o),a=e.clientX,e=e.clientY,n=l(n,o);return{clientX:s,clientY:t,deltaX:i-a,deltaY:r-e,distX:i-n.clientX,distY:r-n.clientY}}function n(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function N(t){return{clientX:t.clientX,clientY:t.clientY}}function l(t,e){void 0===e&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},o=0;o<e;++o){var i=t[o];n.originalClientX+="originalClientX"in i?i.originalClientX:i.clientX,n.originalClientY+="originalClientY"in i?i.originalClientY:i.clientY,n.clientX+=i.clientX,n.clientY+=i.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var y=function(){function t(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}return t.prototype.getAngle=function(t){return e(t=void 0===t?this.prevClients:t)},t.prototype.getRotation=function(t){return e(t=void 0===t?this.prevClients:t)-e(this.startClients)},t.prototype.getPosition=function(t,e){var n=I((t=void 0===t?this.prevClients:t)||this.prevClients,this.prevClients,this.startClients),o=n.deltaX,i=n.deltaY;return this.movement+=Math.sqrt(o*o+i*i),this.prevClients=t,n},t.prototype.getPositions=function(n){void 0===n&&(n=this.prevClients);var o=this.prevClients;return this.startClients.map(function(t,e){return I([n[e]],[o[e]],[t])})},t.prototype.getMovement=function(t){var e,n,o=this.movement;return t?(t=l(t,this.length),e=l(this.prevClients,this.length),n=t.clientX-e.clientX,t=t.clientY-e.clientY,Math.sqrt(n*n+t*t)+o):o},t.prototype.getDistance=function(t){return n(t=void 0===t?this.prevClients:t)},t.prototype.getScale=function(t){return n(t=void 0===t?this.prevClients:t)/n(this.startClients)},t.prototype.move=function(e,n){this.startClients.forEach(function(t){t.clientX-=e,t.clientY-=n}),this.prevClients.forEach(function(t){t.clientX-=e,t.clientY-=n})},t}(),G=["textarea","input"],K=function(r){function t(){this.constructor=e}var e,n;function o(t,e){void 0===e&&(e={});var n,g=r.call(this)||this,t=(g.options={},g.flag=!1,g.pinchFlag=!1,g.data={},g.isDrag=!1,g.isPinch=!1,g.isMouse=!1,g.isTouch=!1,g.clientStores=[],g.targets=[],g.prevTime=0,g.doubleFlag=!1,g._dragFlag=!1,g._isTrusted=!1,g._isMouseEvent=!1,g._isSecondaryButton=!1,g._preventMouseEvent=!1,g._prevInputEvent=null,g.onDragStart=function(t,e){if(void 0===e&&(e=!0),g.flag||!1!==t.cancelable){var n=g.options,o=n.container,i=n.pinchOutside,r=n.preventWheelClick,s=n.preventRightClick,a=n.preventDefault,l=n.checkInput,c=n.preventClickEventOnDragStart,h=n.preventClickEventOnDrag,n=n.preventClickEventByCondition,u=g.isTouch,p=!g.flag;if(g._isSecondaryButton=3===t.which||2===t.button,r&&(2===t.which||1===t.button)||s&&(3===t.which||2===t.button))return g.stop(),!1;if(p){r=document.activeElement,s=t.target;if(s){var f=s.tagName.toLowerCase(),f=-1<G.indexOf(f),v=s.isContentEditable;if(f||v){if(l||r===s)return!1;if(r&&v&&r.isContentEditable&&r.contains(s))return!1}else(a||"touchstart"===t.type)&&r&&(f=r.tagName.toLowerCase(),(r.isContentEditable||-1<G.indexOf(f))&&r.blur());(c||h||n)&&S(window,"click",g._onClick,!0)}g.clientStores=[new y(z(t))],g.flag=!0,g.isDrag=!1,g._isTrusted=e,g._dragFlag=!0,g._prevInputEvent=t,g.data={},g.doubleFlag=H()-g.prevTime<200,g._isMouseEvent=(l=t)&&(-1<l.type.indexOf("mouse")||"button"in l),!g._isMouseEvent&&g._preventMouseEvent&&(g._preventMouseEvent=!1),!1===(g._preventMouseEvent||g.emit("dragStart",b(b({data:g.data,datas:g.data,inputEvent:t,isMouseEvent:g._isMouseEvent,isSecondaryButton:g._isSecondaryButton,isTrusted:e,isDouble:g.doubleFlag},g.getCurrentStore().getPosition()),{preventDefault:function(){t.preventDefault()},preventDrag:function(){g._dragFlag=!1}})))&&g.stop(),g._isMouseEvent&&g.flag&&a&&t.preventDefault()}if(!g.flag)return!1;v=0;p?(g._attchDragEvent(),u&&i&&(v=setTimeout(function(){S(o,"touchstart",g.onDragStart,{passive:!1})}))):u&&i&&E(o,"touchstart",g.onDragStart),g.flag&&((s=t).touches&&2<=s.touches.length)&&(clearTimeout(v),p&&t.touches.length!==t.changedTouches.length||g.pinchFlag||g.onPinchStart(t))}},g.onDrag=function(t,e){if(g.flag){var n=g.options.preventDefault,n=(!g._isMouseEvent&&n&&t.preventDefault(),z(g._prevInputEvent=t)),o=g.moveClients(n,t,!1);if(g._dragFlag){if(g.pinchFlag||o.deltaX||o.deltaY)if(!1===(g._preventMouseEvent||g.emit("drag",b(b({},o),{isScroll:!!e,inputEvent:t}))))return void g.stop();g.pinchFlag&&g.onPinch(t,n)}g.getCurrentStore().getPosition(n,!0)}},g.onDragEnd=function(t){var e,n,o,i,r,s;g.flag&&(s=(o=g.options).pinchOutside,e=o.container,r=o.preventClickEventOnDrag,i=o.preventClickEventOnDragStart,o=o.preventClickEventByCondition,n=g.isDrag,(r||i||o)&&requestAnimationFrame(function(){g._allowClickEvent()}),o||i||!r||n||g._allowClickEvent(),g.isTouch&&s&&E(e,"touchstart",g.onDragStart),g.pinchFlag&&g.onPinchEnd(t),0!==(o=null!=t&&t.touches?z(t):[]).length&&g.options.keepDragging?g._addStore(new y(o)):g.flag=!1,i=g._getPosition(),r=H(),s=!n&&g.doubleFlag,g._prevInputEvent=null,g.prevTime=n||s?0:r,g.flag||(g._dettachDragEvent(),g._preventMouseEvent||g.emit("dragEnd",b({data:g.data,datas:g.data,isDouble:s,isDrag:n,isClick:!n,isMouseEvent:g._isMouseEvent,isSecondaryButton:g._isSecondaryButton,inputEvent:t,isTrusted:g._isTrusted},i)),g.clientStores=[],g._isMouseEvent||(g._preventMouseEvent=!0,requestAnimationFrame(function(){requestAnimationFrame(function(){g._preventMouseEvent=!1})}))))},g.onBlur=function(){g.onDragEnd()},g._allowClickEvent=function(){E(window,"click",g._onClick,!0)},g._onClick=function(t){g._allowClickEvent(),g._preventMouseEvent=!1;var e=g.options.preventClickEventByCondition;null!=e&&e(t)||(t.stopPropagation(),t.preventDefault())},g._onContextMenu=function(t){g.options.preventRightClick?g.onDragEnd(t):t.preventDefault()},g._passCallback=function(){},[].concat(t)),e=(g.options=b({checkInput:!1,container:1<t.length?window:t[0],preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},e),g.options),o=e.container,i=e.events,e=e.checkWindowBlur;return g.isTouch=-1<i.indexOf("touch"),g.isMouse=-1<i.indexOf("mouse"),g.targets=t,g.isMouse&&(t.forEach(function(t){S(t,"mousedown",g.onDragStart),S(t,"mousemove",g._passCallback)}),S(o,"contextmenu",g._onContextMenu)),e&&S(window,"blur",g.onBlur),g.isTouch&&(n={passive:!1},t.forEach(function(t){S(t,"touchstart",g.onDragStart,n),S(t,"touchmove",g._passCallback,n)})),g}return q(e=o,n=r),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t),o.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._allowClickEvent(),this._dettachDragEvent()},o.prototype.getMovement=function(t){return this.getCurrentStore().getMovement(t)+this.clientStores.slice(1).reduce(function(t,e){return t+e.movement},0)},o.prototype.isDragging=function(){return this.isDrag},o.prototype.isFlag=function(){return this.flag},o.prototype.isPinchFlag=function(){return this.pinchFlag},o.prototype.isDoubleFlag=function(){return this.doubleFlag},o.prototype.isPinching=function(){return this.isPinch},o.prototype.scrollBy=function(t,e,n,o){void 0===o&&(o=!0),this.flag&&(this.clientStores[0].move(t,e),o&&this.onDrag(n,!0))},o.prototype.move=function(t,e){var n=t[0],o=t[1],t=this.getCurrentStore().prevClients;return this.moveClients(t.map(function(t){var e=t.clientX,t=t.clientY;return{clientX:e+n,clientY:t+o,originalClientX:e,originalClientY:t}}),e,!0)},o.prototype.triggerDragStart=function(t){this.onDragStart(t,!1)},o.prototype.setEventData=function(t){var e,n=this.data;for(e in t)n[e]=t[e];return this},o.prototype.setEventDatas=function(t){return this.setEventData(t)},o.prototype.getCurrentEvent=function(t){return void 0===t&&(t=this._prevInputEvent),b(b({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:t})},o.prototype.getEventData=function(){return this.data},o.prototype.getEventDatas=function(){return this.data},o.prototype.unset=function(){var e=this,t=this.targets,n=this.options.container;this.off(),E(window,"blur",this.onBlur),this.isMouse&&(t.forEach(function(t){E(t,"mousedown",e.onDragStart)}),E(n,"contextmenu",this._onContextMenu)),this.isTouch&&(t.forEach(function(t){E(t,"touchstart",e.onDragStart)}),E(n,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},o.prototype.onPinchStart=function(t){var e=this.options.pinchThreshold;this.isDrag&&this.getMovement()>e||(e=new y(z(t)),this.pinchFlag=!0,this._addStore(e),!1===this.emit("pinchStart",b(b({data:this.data,datas:this.data,angle:e.getAngle(),touches:this.getCurrentStore().getPositions()},e.getPosition()),{inputEvent:t,isTrusted:this._isTrusted}))&&(this.pinchFlag=!1))},o.prototype.onPinch=function(t,e){var n;!this.flag||!this.pinchFlag||e.length<2||(n=this.getCurrentStore(),this.isPinch=!0,this.emit("pinch",b(b({data:this.data,datas:this.data,movement:this.getMovement(e),angle:n.getAngle(e),rotation:n.getRotation(e),touches:n.getPositions(e),scale:n.getScale(e),distance:n.getDistance(e)},n.getPosition(e)),{inputEvent:t,isTrusted:this._isTrusted})))},o.prototype.onPinchEnd=function(t){var e,n;this.pinchFlag&&(e=this.isPinch,this.isPinch=!1,this.pinchFlag=!1,n=this.getCurrentStore(),this.emit("pinchEnd",b(b({data:this.data,datas:this.data,isPinch:e,touches:n.getPositions()},n.getPosition()),{inputEvent:t})))},o.prototype.getCurrentStore=function(){return this.clientStores[0]},o.prototype.moveClients=function(t,e,n){var n=this._getPosition(t,n),o=this.isDrag,i=((n.deltaX||n.deltaY)&&(this.isDrag=!0),!1);return!o&&this.isDrag&&(i=!0),b(b({data:this.data,datas:this.data},n),{movement:this.getMovement(t),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:e,isTrusted:this._isTrusted,isFirstDrag:i})},o.prototype._addStore=function(t){this.clientStores.splice(0,0,t)},o.prototype._getPosition=function(t,e){var t=this.getCurrentStore().getPosition(t,e),e=this.clientStores.slice(1).reduce(function(t,e){e=e.getPosition();return t.distX+=e.distX,t.distY+=e.distY,t},t),n=e.distX,e=e.distY;return b(b({},t),{distX:n,distY:e})},o.prototype._attchDragEvent=function(){var t=this.options.container,e={passive:!1};this.isMouse&&(S(t,"mousemove",this.onDrag),S(t,"mouseup",this.onDragEnd)),this.isTouch&&(S(t,"touchmove",this.onDrag,e),S(t,"touchend",this.onDragEnd,e),S(t,"touchcancel",this.onDragEnd,e))},o.prototype._dettachDragEvent=function(){var t=this.options.container;this.isMouse&&(E(t,"mousemove",this.onDrag),E(t,"mouseup",this.onDragEnd)),this.isTouch&&(E(t,"touchstart",this.onDragStart),E(t,"touchmove",this.onDrag),E(t,"touchend",this.onDragEnd),E(t,"touchcancel",this.onDragEnd))},o}(t);var $=function(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return e>>>0};function U(n,t,e){return e.original?t:t.replace(/([^};{\s}][^};{]*|^\s*){/gm,function(t,e){e=e.trim();return(e?j(e,","):[""]).map(function(t){t=t.trim();return 0===t.indexOf("@")?t:-1<t.indexOf(":global")?t.replace(/\:global/g,""):-1<t.indexOf(":host")?""+t.replace(/\:host/g,"."+n):t?"."+n+" "+t:"."+n}).join(", ")+" {"})}function J(t,e){for(var n=t.length,o=0;o<n;++o)if(e(t[o],o))return!0;return!1}function Q(t,e){for(var n=t.length,o=0;o<n;++o)if(e(t[o],o))return t[o];return null}function tt(t){if(void 0===t){if("undefined"==typeof navigator||!navigator)return"";t=navigator.userAgent||""}return t.toLowerCase()}function et(t,e){try{return new RegExp(t,"g").exec(e)}catch(t){return null}}function nt(t){return t.replace(/_/g,".")}function o(t,n){var o=null,i="-1";return J(t,function(t){var e=et("("+t.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",n);return e&&!t.brand&&(o=t,i=e[3]||"-1",t.versionAlias?i=t.versionAlias:t.versionTest&&(e=t.versionTest.toLowerCase(),i=((e=et("("+e+")((?:\\/|\\s|:)([0-9|\\.|_]+))",n))?e[3]:"")||i),i=nt(i),1)}),{preset:o,version:i}}function i(t,n){var o={brand:"",version:"-1"};return J(t,function(t){var e=ot(n,t);return e&&(o.brand=t.id,o.version=t.versionAlias||e.version,"-1"!==o.version)}),o}function ot(t,e){return Q(t,function(t){t=t.brand;return et(""+e.test,t.toLowerCase())})}var u=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],it=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],p=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],rt=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],f=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function st(t){return!!o(rt,t).preset}function at(t){return 1-Math.pow(1-t,3)}var v,C,Y,X,T,D,lt,M,x,ct,O,ht,P,ut,it="safari"===(void 0===v&&function(){var t;if("undefined"!=typeof navigator&&navigator&&navigator.userAgentData)return(t=(t=navigator.userAgentData).brands||t.uaList)&&t.length}()?(Y=((M=navigator.userAgentData).uaList||M.brands).slice(),X=C&&C.fullVersionList,T=M.mobile||!1,D=Y[0],lt=(C&&C.platform||M.platform||navigator.platform).toLowerCase(),M={name:D.brand,version:D.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!i(rt,Y).brand||st(tt())},D={name:"unknown",version:"-1",majorVersion:-1},M.webkit=!M.chromium&&J(p,function(t){return ot(Y,t)}),x=i(it,Y),M.chromium=!!x.brand,M.chromiumVersion=x.version,M.chromium||(x=i(p,Y),M.webkit=!!x.brand,M.webkitVersion=x.version),x=Q(f,function(t){return new RegExp(""+t.test,"g").exec(lt)}),D.name=x?x.id:"",C&&(D.version=C.platformVersion),X&&X.length?(x=i(u,X),M.name=x.brand||M.name,M.version=x.version||M.version):(X=i(u,Y),M.name=X.brand||M.name,M.version=X.brand&&C?C.uaFullVersion:X.version),M.webkit&&(D.name=T?"ios":"mac"),"ios"===D.name&&M.webview&&(M.version="-1"),D.version=nt(D.version),M.version=nt(M.version),D.majorVersion=parseInt(D.version,10),M.majorVersion=parseInt(M.version,10),{browser:M,os:D,isMobile:T,isHints:!0}):(x=tt(x=v),C=!!/mobi/g.exec(x),X={name:"unknown",version:"-1",majorVersion:-1,webview:st(x),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},M={name:"unknown",version:"-1",majorVersion:-1},T=(D=o(u,x)).preset,D=D.version,u=(v=o(f,x)).preset,v=v.version,f=o(it,x),X.chromium=!!f.preset,X.chromiumVersion=f.version,X.chromium||(f=o(p,x),X.webkit=!!f.preset,X.webkitVersion=f.version),u&&(M.name=u.id,M.version=v,M.majorVersion=parseInt(v,10)),T&&(X.name=T.id,X.version=D,X.webview&&"ios"===M.name&&"safari"!==X.name&&(X.webview=!1)),X.majorVersion=parseInt(X.version,10),{browser:X,os:M,isMobile:C,isHints:!1})).browser.name,p="infinite-viewer-",pt="".concat(p,"wrapper"),ft="".concat(p,"restrict-wrapper"),vt="".concat(p,"scroll-area"),gt="".concat(p,"scroll-bar"),dt="".concat(p,"horizontal-scroll-bar"),mt="".concat(p,"vertical-scroll-bar"),wt="".concat(p,"scroll-thumb"),_t=(ut=p,ct="\n{\n    position: relative;\n    overscroll-behavior: none;\n}\n.wrapper {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    overflow: auto;\n    top: 0;\n    left: 0;\n    will-change: scroll-position;\n}\n.restrict-wrapper {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n}\n.wrapper::-webkit-scrollbar {\n    display: none;\n}\n.scroll-area {\n    position:absolute;\n    top:0;\n    left:0;\n    transform-origin: 0 0;\n}\n.scroll-bar {\n    position:absolute;\n    width: 10px;\n    height: 10px;\n    box-sizing: border-box;\n    right: 0;\n    bottom: 0;\n    overflow: hidden;\n}\n.horizontal-scroll-bar {\n    width: 100%;\n    height: 14px;\n}\n.vertical-scroll-bar {\n    height: 100%;\n    width: 14px;\n}\n.scroll-thumb {\n    position:relative;\n    opacity: 0.7;\n    background: #333;\n    border-radius: 3px;\n    left: 0px;\n    top: 0px;\n    z-index: 10;\n    width: 6px;\n    height: 6px;\n    transition: all ease 0.2s;\n}\n.horizontal-scroll-bar .scroll-thumb {\n    margin: 4px 0px;\n    transition-property: margin, height, border-radius;\n}\n.vertical-scroll-bar .scroll-thumb {\n    margin: 0px 4px;\n    transition-property: margin, width, border-radius;\n}\n.horizontal-scroll-bar:hover .scroll-thumb {\n    height: 10px;\n    margin: 2px 0px;\n    border-radius: 5px;\n}\n.vertical-scroll-bar:hover .scroll-thumb {\n    width: 10px;\n    margin: 0px 2px;\n    border-radius: 5px;\n}\n".replace(/([^}{]*){/gm,function(t,e){return e.replace(/\.([^{,\s\d.]+)/g,"."+ut+"$1")+"{"}),{className:ht="rCS"+$(ct).toString(36),inject:function(t,e){void 0===e&&(e={});var n,o,i,r,s,a=function(t){if(t&&t.getRootNode){t=t.getRootNode();if(11===t.nodeType)return t}}(t),t=0===P;return(a||t)&&(o=ht,i=ct,e=e,r=a,(s=document.createElement("style")).setAttribute("type","text/css"),s.setAttribute("data-styled-id",o),e.nonce&&s.setAttribute("nonce",e.nonce),s.innerHTML=U(o,i,e),(r||document.head||document.body).appendChild(s),n=s),t&&(O=n),a||++P,{destroy:function(){a?(a.removeChild(n),n=null):(0<P&&--P,0===P&&O&&(O.parentNode.removeChild(O),O=null))}}}}),A={margin:500,threshold:100,zoom:1,zoomX:1,zoomY:1,rangeX:[-1/(P=0),1/0],rangeY:[-1/0,1/0],rangeOffsetX:[0,0],rangeOffsetY:[0,0],wrapperElement:null,scrollAreaElement:null,horizontalScrollElement:null,verticalScrollElement:null,usePinch:!1,useAutoZoom:!1,useMouseDrag:!1,pinchThreshold:30,cspNonce:"",maxPinchWheel:1/0,wheelScale:.01,displayHorizontalScroll:!0,displayVerticalScroll:!0,useTransform:!0,useWheelPinch:!0,zoomRange:[.001,1/0],wheelPinchKey:"ctrl",useWheelScroll:it,zoomOffsetX:"50%",zoomOffsetY:"50%",translateZ:0,useGesture:!0,useResizeObserver:!1,pinchDirection:"all",preventWheelClick:!0},St={horizontal:{pos:"Left",coord:"X",size:"Width"},vertical:{pos:"Top",coord:"Y",size:"Height"}},Et=_t.className,bt=["margin","threshold","zoomOffsetX","zoomOffsetY","zoom","zoomX","zoomY","rangeX","rangeY","rangeOffsetX","rangeOffsetY","usePinch","useMouseDrag","pinchThreshold","maxPinchWheel","wheelScale","displayVerticalScroll","displayHorizontalScroll","useWheelScroll","translateZ","useAutoZoom","wheelPinchKey","zoomRange","pinchDirection"],f=W(W([],bt,!0),["preventWheelClick","useWheel","useGesture","cspNonce","wrapperElement","scrollAreaElement","verticalScrollElement","horizontalScrollElement","useResizeObserver"],!1);function zt(t,e){t=Math.sqrt(t[0]*t[0]+t[1]*t[1]);return Math.abs(t/e)}function k(t){return Math.abs(t)}function yt(t,e){return null!=t?t:e}function Ct(i,r,t){function s(){var t=Date.now(),e=t-c,n=l((e=a<e?a:e)/a),o=l((h-c)/a);h=t,i(n-o),a<=e||r(s)}var a=t.duration,l=t.easing||function(t){return 1-Math.pow(1-t,3)},c=Date.now(),h=c;r(s)}var Yt,Xt=function(o){function t(t,e){var n,r=o.call(this)||this,s=(r.type=t,r.isAppend=!1,r.size=0,r.scrollSize=0,r.isHorizontal=!1,r.onWheel=function(t){var e=r.isHorizontal?t.deltaX:t.deltaY;e&&t.preventDefault(),r.trigger("scroll",{delta:e})},"horizontal"===t),t=e;return e?n=e.querySelector(".".concat(wt)):(t=document.createElement("div"),n=document.createElement("div"),t.insertBefore(n,null),r.isAppend=!0),h(t,s?dt:mt),h(t,gt),h(n,wt),r.thumbElement=n,r.barElement=t,r.isHorizontal=s,r.gesto=new K(t,{container:window}).on("dragStart",function(i){var t=i.inputEvent.target,e=i.datas,t=r.thumbElement===t;t||setTimeout(function(){requestAnimationFrame(function(){var t=r.thumbElement.getBoundingClientRect(),e=t[s?"left":"top"],t=t[s?"width":"height"],n=i[s?"clientX":"clientY"],o=n-(e+t),n=n-e;0<=n&&o<=0||(r.scrollSize,o=(e=(0<o?o:n)/(t/r.size*r.scrollSize))*r.size,console.log(r.scrollSize,e,o),r.scrollBy(o))})},100),e.isThumb=t,i.inputEvent.stopPropagation(),i.inputEvent.preventDefault()}).on("drag",function(t){t.datas.isThumb&&r.scrollBy(r.isHorizontal?t.deltaX:t.deltaY)}),S(r.barElement,"wheel",r.onWheel,{passive:!1}),r}r(t,o);var e=t.prototype;return e.scrollBy=function(t){t/=this.size;this.trigger("scroll",{delta:this.scrollSize*t})},e.render=function(t,e,n){var o=n[0],n=n[1],i=(o=k(o)+n,(i=.001)?(r=1/i,Math.round(o/i)/r):o),r=e+i,o=t&&i?"block":"none",t=this.isHorizontal?["X","width"]:["Y","height"],i=t[0],t=t[1],s=e/r,n=n/r/s;this.size=e,this.scrollSize=r,this.barElement.style.cssText="display: ".concat(o,";"),this.thumbElement.style.cssText+="".concat(t,": ").concat(100*s,"%;")+"transform: translate".concat(i,"(").concat(100*n,"%)")},e.destroy=function(){E(this.barElement,"wheel",this.onWheel),this.gesto.off(),this.off()},t}(t),Tt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(function(o){function t(t,e,n){void 0===e&&(e={}),void 0===n&&(n={});var a=o.call(this)||this;return a._containerElement=t,a.offsetX=0,a.offsetY=0,a.containerWidth=0,a.containerHeight=0,a.viewportWidth=0,a.viewportHeight=0,a.viewportScrollWidth=0,a.viewportScrollHeight=0,a.scrollLeft=0,a.scrollTop=0,a._scrollTimer=0,a._zoomTimer=0,a._viewportElement=null,a._restrictWrapperElement=null,a.dragFlag=!1,a.isLoop=!1,a._tempScale=[1,1],a._tempRect=null,a._tempRectTimer=null,a._onDestroys=[],a._asLeft=0,a._asTop=0,a.resize=function(){var t=a._containerElement,e=t.offsetWidth,t=t.offsetHeight,n=a._viewportElement,o=n.offsetWidth,i=n.offsetHeight,r=n.scrollWidth,n=n.scrollHeight;a.containerWidth=e,a.containerHeight=t,a.viewportWidth=o,a.viewportHeight=i,a.viewportScrollWidth=Math.max(o,r),a.viewportScrollHeight=Math.max(o,n),a.render(),a._scrollBy(0,0)},a._onScroll=function(){var t=a.wrapperElement,e=t.scrollLeft,t=t.scrollTop,n=a.zoom,n=void 0===n?A.zoom:n,o=e-a.scrollLeft,i=t-a.scrollTop,r=a.getScrollLeft(),s=a.getScrollTop();a.isLoop&&(a.isLoop=!1),a.scrollLeft=e,a.scrollTop=t,a.scrollTo(r+o/n,s+i/n)},a.onWheel=function(t){var e=a.options,n=e.pinchDirection,o=e.maxPinchWheel||1/0,i=t["".concat(a.wheelPinchKey,"Key")]||t.ctrlKey;if(e.useWheelPinch&&i){i=0<=(r=t.deltaY)?1:-1,o=Math.min(o,Math.abs(r)),i=-(r=i*o),i=Math.max(1+i*(e.wheelScale||.01),1e-6);clearTimeout(a._tempRectTimer),a._tempRectTimer=window.setTimeout(function(){a._tempRect=null},100),a._triggerPinch({distance:o,scale:i,rotation:0,zoom:a.zoom*i,zoomX:a.zoomX*("vertical"===n?1:i),zoomY:a.zoomY*("horizontal"===n?1:i),inputEvent:t,isWheel:!0,clientX:t.clientX,clientY:t.clientY,ratioX:0,ratioY:0})}else{if(!e.useWheelScroll)return;var o=t.deltaX,r=t.deltaY;t.shiftKey&&!o&&(o=r,r=0),a.scrollBy(o/a.zoomX,r/a.zoomY)}t.preventDefault()},a.onGestureStart=function(t){a._tempScale=[a.zoomX,a.zoomY],a._setClientRect(),t.preventDefault()},a.onGestureChange=function(t){var e,n,o,i;t.preventDefault(),a.gesto.isFlag()||!a._tempScale?a._tempScale=[1,1]:(e=t.scale,n=a._tempScale[0],o=a._tempScale[1],i=a.options.pinchDirection,a._triggerPinch({distance:0,scale:e,rotation:t.rotation,inputEvent:t,isWheel:!0,zoom:(n+o)*e/2,zoomX:n*("vertical"===i?1:e),zoomY:o*("horizontal"===i?1:e),clientX:t.clientX,clientY:t.clientY,ratioX:0,ratioY:0}))},a.onGestureEnd=function(){},e instanceof Element?(a._viewportElement=e,a.options=c(c({},A),n)):(a._viewportElement=t.children[0],a.options=c(c({},A),e)),a.init(),a}r(t,o);var n,i,e=t.prototype;return e.getContainer=function(){return this._containerElement},e.getViewport=function(){return this._viewportElement},e.getWrapper=function(){return this.wrapperElement},e.geScrollArea=function(){return this.scrollAreaElement},e.destroy=function(){this.off(),this.gesto.unset(),this.verticalScrollbar.destroy(),this.horizontalScrollbar.destroy(),this.injectResult.destroy();var t=this._containerElement;this._onDestroys.forEach(function(t){t()}),E(this.wrapperElement,"scroll",this._onScroll),E(t,"wheel",this.onWheel),E(t,"gesturestart",this.onGestureStart),E(t,"gesturechange",this.onGestureChange),E(t,"gesturesend",this.onGestureEnd),this.gesto=null,this.injectResult=null,this._containerElement=null,this._viewportElement=null,this.options=null},e.getScrollTop=function(t){var e=!1,n=!1,t=(a(t=void 0===t?{}:t)?(e=t.range,n=t.absolute):e=t,this.zoomY),e=this.scrollTop/t+this.offsetY+(e?k(this.getRangeY()[0]):0);return n?e*t:e},e.getScrollLeft=function(t){var e=!1,n=!1,t=(a(t=void 0===t?{}:t)?(e=t.range,n=t.absolute):e=t,this.zoomX),e=this.scrollLeft/t+this.offsetX+(e?k(this.getRangeX()[0]):0);return n?e*t:e},e.getScrollWidth=function(t){var e=this._getScrollRangeX(),n=this.zoomX,e=this.containerWidth/n+k(e[0])+e[1];return t?e:e*n},e.getScrollHeight=function(t){var e=this._getScrollRangeY(),n=this.zoomY,e=this.containerHeight/n+k(e[0])+e[1];return t?e:e*n},e.scrollCenter=function(t){this.resize();var e=this.zoomX,n=this.zoomY,o=-(this.containerWidth/e-this.viewportWidth)/2,i=-(this.containerHeight/n-this.viewportHeight)/2;return null!=t&&t.absolute&&(o*=e,i*=n),this.scrollTo(o,i,t)},e.scrollBy=function(t,e,n){var o,i;return this._pauseScrollAnimation(),n&&n.duration?(this._startScrollAnimation([t,e],n),!0):(o=this.getScrollLeft(),i=this.getScrollTop(),null!=n&&n.absolute&&(o*=this.zoomX,i*=this.zoomY),this._scrollTo(o+t,i+e,n))},e.scrollTo=function(t,e,n){var o,i;return this._pauseScrollAnimation(),n&&n.duration?(o=this.getScrollLeft(),i=this.getScrollTop(),null!=n&&n.absolute&&(o*=this.zoomX,i*=this.zoomY),this.scrollBy(t-o,e-i,n)):this._scrollTo(t,e,n)},e.zoomBy=function(t,e){this._pauseZoomAnimation();var t=g(t)?t:[t,t],n=t[0],t=t[1];e&&e.duration?this._startZoomAnimation([n,t],e):this._setZoom([this.zoomX+n,this.zoomY+t],e)},e.setZoom=function(t,e){var n,o;this._pauseZoomAnimation(),e&&e.duration?(n=(o=g(t)?t:[t,t])[0],o=o[1],this._startZoomAnimation([n-this.zoomX,o-this.zoomY],e)):this._setZoom(t,e)},e.getZoom=function(){return(this.zoomX+this.zoomY)/2},e.getZoomX=function(){return this.zoomX},e.getZoomY=function(){return this.zoomY},e.getRangeX=function(t,e){return this._getRangeCoord("horizontal",t,e)},e.getRangeY=function(t,e){return this._getRangeCoord("vertical",t,e)},e.init=function(){var t,a=this,e=this._containerElement,l=this.options,n=l.wrapperElement||e.querySelector(".".concat(pt)),o=l.scrollAreaElement||e.querySelector(".".concat(vt)),i=e.querySelector(".".concat(ft)),r=l.horizontalScrollElement||e.querySelector(".".concat(dt)),s=l.verticalScrollElement||e.querySelector(".".concat(mt));n||((n=document.createElement("div")).insertBefore(this._viewportElement,null),e.insertBefore(n,null)),this._restrictWrapperElement=i,this.wrapperElement=n,o||(o=document.createElement("div"),n.insertBefore(o,n.firstChild)),this.scrollAreaElement=o,h(e,Et),h(n,pt),h(o,vt),this.horizontalScrollbar=new Xt("horizontal",r),this.verticalScrollbar=new Xt("vertical",s),this.horizontalScrollbar.on("scroll",function(t){a.scrollBy(t.delta/a.zoomX,0)}),this.verticalScrollbar.on("scroll",function(t){a.scrollBy(0,t.delta/a.zoomY)}),this.horizontalScrollbar.isAppend&&e.insertBefore(this.horizontalScrollbar.barElement,null),this.verticalScrollbar.isAppend&&e.insertBefore(this.verticalScrollbar.barElement,null),this.injectResult=_t.inject(e,{nonce:this.options.cspNonce}),this.gesto=new K(e,{container:window,events:["touch","mouse"],preventWheelClick:null==(i=this.options.preventWheelClick)||i}).on("dragStart",function(t){var e=t.inputEvent,n=t.stop,o=t.datas;!a.useMouseDrag&&t.isMouseEvent||(a._pauseScrollAnimation(),(a.dragFlag=!1)===a.trigger("dragStart",t))?n():(e.preventDefault(),o.startEvent=e)}).on("drag",function(t){var e,n,o,i,r,s;!a.options.usePinch||t.isPinch||a.useMouseDrag&&t.isMouseEvent?(a.trigger("drag",c(c({},t),{inputEvent:t.inputEvent})),o=(e=t).deltaX,i=e.deltaY,e=e.datas,r=Date.now(),(s=e.speed)?(n=r-e.time,e.speed=[s[0]/2+o/n,s[1]/2+i/n]):(e.speed=[0,0],e.time=r),a.scrollBy(-t.deltaX/a.zoomX,-t.deltaY/a.zoomY)):!a.dragFlag&&t.movement>l.pinchThreshold&&(a.dragFlag=!0,a.trigger("abortPinch",{inputEvent:t.datas.startEvent||t.inputEvent}))}).on("dragEnd",function(t){a.trigger("dragEnd",{isDrag:t.isDrag,isDouble:t.isDouble,inputEvent:t.inputEvent}),a._startScrollAnimationBySpeed(t.datas.speed)}).on("pinchStart",function(t){var e=t.inputEvent,n=t.datas,t=t.stop;e.preventDefault(),a._pauseScrollAnimation(),!(n.startZoom=[a.zoomX,a.zoomY])===a.trigger("pinchStart",{inputEvent:e})&&t(),a._setClientRect()}).on("pinch",function(t){var e=t.scale,n=a.options.pinchDirection;a._triggerPinch({rotation:t.rotation,distance:t.distance,scale:t.scale,inputEvent:t.inputEvent,isWheel:!1,zoom:t.datas.startZoom*e,zoomX:a.zoomX*("vertical"===n?1:e),zoomY:a.zoomY*("horizontal"===n?1:e),clientX:t.clientX,clientY:t.clientY,ratioX:0,ratioY:0})}).on("pinchEnd",function(){a._tempRect=null}),S(n,"scroll",this._onScroll),l.useResizeObserver?((t=new ResizeObserver(function(){a.resize()})).observe(this._viewportElement),t.observe(this._containerElement),this._onDestroys.push(function(){t.disconnect()})):(S(window,"resize",this.resize),this._onDestroys.push(function(){E(window,"resize",a.resize)})),(l.useWheelPinch||l.useWheelScroll)&&S(e,"wheel",this.onWheel,{passive:!1}),l.useGesture&&(S(e,"gesturestart",this.onGestureStart,{passive:!1}),S(e,"gesturechange",this.onGestureChange,{passive:!1})),this.resize()},e.render=function(){var t=this,e=t.offsetX,n=t.offsetY,o=t.zoomX,o=void 0===o?A.zoomX:o,i=t.zoomY,i=void 0===i?A.zoomY:i,r=t.translateZ,r=void 0===r?0:r,t=(t.rangeX,t.rangeY,t.containerWidth,t.containerHeight,this.options.useTransform),t=void 0===t?A.useTransform:t,e=-e*o,n=-n*i,s=(this.scrollAreaElement.style.cssText="width:calc(100% + ".concat(this.getScrollAreaWidth(),"px);")+"height:calc(100% + ".concat(this.getScrollAreaHeight(),"px);"),this._viewportElement.style);s.cssText+=!1===t?"position: relative; left: ".concat(e,"px; top: ").concat(n,"px; "):"transform-origin: 0 0;"+"transform:translate3d(".concat(e,"px, ").concat(n,"px, ").concat(r,"px) scale(").concat(o,", ").concat(i,");"),this.renderScroll()},e.renderScroll=function(){var t=this.containerWidth,e=this.containerHeight,n=this.zoomX,o=this.zoomY;this.horizontalScrollbar.render(this.displayHorizontalScroll,t/n,this._getScrollRangeX()),this.verticalScrollbar.render(this.displayVerticalScroll,e/o,this._getScrollRangeY())},e.move=function(t,e){var n=this.wrapperElement;n.scrollLeft=t,n.scrollTop=e},e._startZoomAnimation=function(e,n){var t,o=this;e&&(t=n.duration,Ct(function(t){o._setZoom([o.zoomX+e[0]*t,o.zoomY+e[1]*t],n)},function(t){o._zoomTimer=requestAnimationFrame(t)},{easing:n.easing||at,duration:t}))},e._startScrollAnimation=function(e,n){var t,o=this;(e[0]||e[1])&&(t=n.duration,Ct(function(t){o._scrollBy(e[0]*t,e[1]*t,n)},function(t){o._scrollTimer=requestAnimationFrame(t)},{easing:n.easing||at,duration:t}))},e._startScrollAnimationBySpeed=function(t){var e,n;if(t&&(t[0]||t[1]))return e=zt(t,-6e-4),n=zt(t=t,n=-6e-4),t=[-t[0]/2*n,-t[1]/2*n],this._startScrollAnimation(t,{duration:e})},e._pauseScrollAnimation=function(){cancelAnimationFrame(this._scrollTimer),this._scrollTimer=0},e._pauseZoomAnimation=function(){cancelAnimationFrame(this._zoomTimer),this._zoomTimer=0},e.getScrollAreaWidth=function(){var t=this.getRangeX(!0),e=t[0],t=t[1];return e||t?2*this.margin:0},e.getScrollAreaHeight=function(){var t=this.getRangeY(!0),e=t[0],t=t[1];return e||t?2*this.margin:0},e._triggerPinch=function(t){var e=t.clientX,n=t.clientY,o=t.zoomX,i=t.zoomY,r=(this.useAutoZoom&&this._zoomByClient([o,i],e,n),this._tempRect||this._setClientRect(),this.zoomRange),s=this._tempRect,a=s.left,l=s.top,e=(e-a)/s.width*100,a=(n-l)/s.height*100;this.trigger("pinch",c(c({},t),{zoom:_((o+i)/2,r[0],r[1]),zoomX:_(o,r[0],r[1]),zoomY:_(i,r[0],r[1]),ratioX:e,ratioY:a}))},e._setClientRect=function(){var t=this.getContainer().getBoundingClientRect();this._tempRect={left:t.left,top:t.top,width:t.width,height:t.height}},e._zoomByClient=function(t,e,n){this._tempRect||this._setClientRect();var o=this._tempRect,i=o.left,r=o.top,s=o.width,o=o.height,a=this.options,l=a.zoomOffsetX,c=a.zoomOffsetY;a.zoomOffsetX="".concat((e-i)/s*100,"%"),a.zoomOffsetY="".concat((n-r)/o*100,"%"),this._setZoom(t,{zoomBase:"screen"}),a.zoomOffsetX=l,a.zoomOffsetY=c},e._setZoom=function(t,e){var n=(e=void 0===e?{}:e).zoomBase,o=this,i=o.containerWidth,r=o.containerHeight,s=o.zoomX,a=o.zoomY,o=o.zoomRange,l=this.zoomOffsetX,l=void 0===l?A.zoomOffsetX:l,c=this.zoomOffsetY,c=void 0===c?A.zoomOffsetY:c,e=("zoomOffsetX"in e&&(l=e.zoomOffsetX),"zoomOffsetY"in e&&(c=e.zoomOffsetY),this.getScrollLeft()),h=this.getScrollTop(),t=g(t)?t:[t,t],u=t[0],t=t[1],u=_(u,o[0],o[1]),t=_(t,o[0],o[1]),o=this.options,o=(o.zoomX=u,o.zoomY=t,o.zoom=(u+t)/2,this.getScrollLeft()),p=this.getScrollTop(),f=0,v=0,v="viewport"===n?(f=(-e+d("".concat(l),this.viewportWidth))*s,(-h+d("".concat(c),this.viewportHeight))*a):(f=d("".concat(l),i),d("".concat(c),r));this._scrollBy(e+f/s-(o+f/u),h+v/a-(p+v/t),{zoom:!!(u-s||t-a)}),this.render()},e._scrollBy=function(t,e,n){var o=this.getScrollLeft(),i=this.getScrollTop();return null!=n&&n.absolute&&(o*=this.zoomX,i*=this.zoomY),this._scrollTo(o+t,i+e,n)},e._scrollTo=function(t,e,n){var o=this,i=this.scrollLeft,r=this.scrollTop,s=null==n?void 0:n.absolute,a=(this._scrollToType("horizontal",t,s),this._scrollToType("vertical",e,s),this.scrollLeft),l=this.scrollTop,c=(this.render(),this.getScrollLeft()),h=this.getScrollTop();return this._emitScrollEvent(c,h,null==n?void 0:n.zoom),Math.round(i)===a&&Math.round(r)===l||(this.isLoop=!0,this.move(a,l),requestAnimationFrame(function(){var t,e;o.isLoop&&(o.isLoop=!1,t=(e=o.wrapperElement).scrollLeft,e=e.scrollTop,o.scrollLeft=t,o.scrollTop=e,a===Math.round(t)&&l===Math.round(e)||o._scrollTo(c,h))}),!1)},e._scrollToType=function(t,e,n){var t=St[t],o=this.margin,o=void 0===o?A.margin:o,i=this.threshold,i=void 0===i?A.threshold:i,r=this["scroll".concat(t.pos)],s=this["getRange".concat(t.coord)](!0,!0),a=s[0],s=s[1],r=Math.round(r),l=this["getScrollArea".concat(t.size)](),c=this["zoom".concat(t.coord)],n=(n&&(e/=c),e*c);a===s?e=(r=a)/c:n-i<=a?e=(a+(r=Math.max(0,n-a)))/c:s<=n+i?(r=l-(a=Math.max(0,s-n)),e=(s-a)/c):r<i?r+=o:l-i<r&&(r-=o),r=Math.round(r),this["scroll".concat(t.pos)]=r,this["offset".concat(t.coord)]=e-r/c},e._getRangeCoord=function(t,e,n){var o=this.margin,o=void 0===o?A.margin:o,i=this.threshold,t=St[t],r=yt(this["range".concat(t.coord)],A["range".concat(t.coord)]),s=yt(this["rangeOffset".concat(t.coord)],A["rangeOffset".concat(t.coord)]),a=this["zoom".concat(t.coord)],n=(t=this["getScroll".concat(t.pos)](),o=o,r=r,i=i,[(n=n)||isFinite(r[0])?r[0]:Math.min(-1,Math.floor(t/o))*o-i,n||isFinite(r[1])?r[1]:Math.max(1,Math.ceil(t/o))*o+i]);return e?[n[0]*a+s[0],n[1]*a+s[1]]:[n[0]+s[0],n[1]+s[1]]},e._emitScrollEvent=function(t,e,n){var o=this._asLeft,i=this._asTop;!n&&o===t&&i===e||(this._asLeft=t,this._asTop=e,this.trigger("scroll",{scrollLeft:t,scrollTop:e,zoomX:this.zoomX,zoomY:this.zoomY}))},e._getScrollRangeX=function(){var t=this.getScrollLeft(),e=Math.min(0,t),t=Math.max(0,t),n=this.viewportScrollWidth,n=Math.max(this.containerWidth/this.zoomX,n)-n;return[Math.min(0,n+e),t]},e._getScrollRangeY=function(){var t=this.getScrollTop(),e=Math.min(0,t),t=Math.max(0,t),n=this.viewportScrollHeight,n=Math.max(this.containerHeight/this.zoomY,n)-n;return[Math.min(0,n+e),t]},function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;0<=a;a--)(i=t[a])&&(s=(r<3?i(s):3<r?i(e,n,s):i(e,n))||s);return 3<r&&s&&Object.defineProperty(e,n,s),s}([(n=bt,i=function(t,e){var n={enumerable:!0,configurable:!0,get:function(){return this.options[e]}},o="set ".concat(e).replace(/[\s-_]([a-z])/g,function(t,e){return e.toUpperCase()});t[o]?n.set=function(t){this[o](t)}:n.set=function(t){this.options[e]=t},Object.defineProperty(t,e,n)},function(t){var e=t.prototype;n.forEach(function(t){i(e,t)})})],t)}(t)),Dt={__proto__:null,default:Tt,OPTIONS:f,PROPERTIES:bt,EVENTS:["scroll","abortPinch","dragStart","dragEnd","pinchStart","pinch"],METHODS:["getScrollLeft","getScrollTop","getScrollWidth","getScrollHeight","scrollTo","scrollBy","zoomBy","scrollCenter","getContainer","getViewport","getWrapper","setZoom","getRangeX","getRangeY","resize","getZoom","getZoomX","getZoomY"],CLASS_NAME:Et};for(Yt in Dt)Tt[Yt]=Dt[Yt];return Tt});
//# sourceMappingURL=infinite-viewer.min.js.map
