/*
Copyright (c) Daybrush
name: infinite-viewer
license: MIT
author: Daybrush
repository: git+https://github.com/daybrush/infinite-viewer.git
version: 0.29.0
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).InfiniteViewer=e()}(this,function(){"use strict";var W=function(t,e){return(W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}W(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var u=function(){return(u=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function k(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||((o=o||Array.prototype.slice.call(e,0,i))[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))}var B="function",F="object",H="undefined"!=typeof document&&document,L=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],s={cm:function(t){return 96*t/2.54},mm:function(t){return 96*t/254},in:function(t){return 96*t},pt:function(t){return 96*t/72},pc:function(t){return 96*t/6},"%":function(t,e){return t*e/100},vw:function(t,e){return t/100*(e=void 0===e?window.innerWidth:e)},vh:function(t,e){return t/100*(e=void 0===e?window.innerHeight:e)},vmax:function(t,e){return t/100*(e=void 0===e?Math.max(window.innerWidth,window.innerHeight):e)},vmin:function(t,e){return t/100*(e=void 0===e?Math.min(window.innerWidth,window.innerHeight):e)}};function a(t){return t&&typeof t===F}function d(t){return Array.isArray(t)}function j(t){return"string"==typeof t}function V(t,e,n,o,i){if(m(t,e,n))return n;for(var r,s=t,a=e,l=o,c=i,h=n+1;h<l;++h){var u=function(t){var e,n,o=a[t].trim();return o!==s.close||m(s,a,t)?(e=t,-1===(e=(n=w(c,function(t){return t.open===o}))?V(n,a,t,l,c):e)?(r=t,"break"):void(r=t=e)):{value:t}}(h);if(h=r,"object"==typeof u)return u.value;if("break"===u)break}return-1}function m(t,e,n){return t.ignore?(e=e.slice(Math.max(n-3,0),n+3).join(""),new RegExp(t.ignore).exec(e)):null}function Z(r,t){var t=j(t)?{separator:t}:t,e=t.separator,s=void 0===e?",":e,a=t.isSeparateFirst,l=t.isSeparateOnlyOpenClose,e=t.isSeparateOpenClose,c=void 0===e?l:e,e=t.openCloseCharacters,h=void 0===e?L:e,t=h.map(function(t){var e=t.open,t=t.close;return e===t?e:e+"|"+t}).join("|"),e=new RegExp("(\\s*"+s+"\\s*|"+t+"|\\s+)","g"),u=r.split(e).filter(function(t){return t&&"undefined"!==t}),p=u.length,f=[],g=[];function d(){return g.length&&(f.push(g.join("")),g=[])}for(var v,n=function(t){var e=u[t].trim(),n=t,o=w(h,function(t){return t.open===e}),i=w(h,function(t){return t.close===e});if(o){if(-1!==(n=V(o,u,t,p,h))&&c)return d()&&a||(f.push(u.slice(t,n+1).join("")),t=n,a)?(v=t,"break"):(v=t,"continue")}else{if(i&&!m(i,u,t))return(o=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var o=Array(t),i=0,e=0;e<n;e++)for(var r=arguments[e],s=0,a=r.length;s<a;s++,i++)o[i]=r[s];return o}(h)).splice(h.indexOf(i),1),{value:Z(r,{separator:s,isSeparateFirst:a,isSeparateOnlyOpenClose:l,isSeparateOpenClose:c,openCloseCharacters:o})};if(i=e,!((""!==(o=s)&&" "!=o||""!==i&&" "!=i)&&i!==o||l))return d(),a?(v=t,"break"):(v=t,"continue")}g.push(u.slice(t,(n=-1===n?p-1:n)+1).join("")),v=t=n},o=0;o<p;++o){var i=n(o),o=v;if("object"==typeof i)return i.value;if("break"===i)break}return g.length&&f.push(g.join("")),f}function I(){return Date.now?Date.now():(new Date).getTime()}function q(t,e,n){void 0===n&&(n=-1);for(var o=t.length,i=0;i<o;++i)if(e(t[i],i,t))return i;return n}function w(t,e,n){e=q(t,e);return-1<e?t[e]:n}function v(t,e){var n=(t=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t=t))?(n=t[1],o=t[2],{prefix:n,unit:t[3],value:parseFloat(o)}):{prefix:"",unit:"",value:NaN},t=n.value,o=n.unit;if(a(e)){var i=e[o];if(i){if(typeof i===B)return i(t);if(s[o])return s[o](t,i)}}else if("%"===o)return t*e/100;return s[o]?s[o](t):t}function _(t,e,n){return Math.max(e,Math.min(t,n))}function h(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function S(t,e,n,o){t.addEventListener(e,n,o)}function z(t,e,n,o){t.removeEventListener(e,n,o)}function p(t){return(null==t?void 0:t.ownerDocument)||H}function f(t){return(null==(t=null==t?void 0:t.ownerDocument)?void 0:t.defaultView)||window}function N(t){return a(t)&&t.nodeName&&t.nodeType&&"ownerDocument"in t}var G=function(){return(G=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};var t=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(t,e){if(a(t))for(var n in t)this.on(n,t[n]);else this._addEvent(t,e,{});return this},e.off=function(t,e){if(t)if(a(t))for(var n in t)this.off(n);else{var o,i;e?(o=this._events[t])&&-1<(i=q(o,function(t){return t.listener===e}))&&o.splice(i,1):this._events[t]=[]}else this._events={};return this},e.once=function(e,t){var n=this;return t&&this._addEvent(e,t,{once:!0}),new Promise(function(t){n._addEvent(e,t,{once:!0})})},e.emit=function(e,n){var t,o=this,i=(void 0===n&&(n={}),this._events[e]);return!e||!i||(t=!1,n.eventType=e,n.stop=function(){t=!0},n.currentTarget=this,function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var o=Array(t),i=0,e=0;e<n;e++)for(var r=arguments[e],s=0,a=r.length;s<a;s++,i++)o[i]=r[s];return o}(i).forEach(function(t){t.listener(n),t.once&&o.off(e,t.listener)}),!t)},e.trigger=function(t,e){return this.emit(t,e=void 0===e?{}:e)},e._addEvent=function(t,e,n){var o=this._events;o[t]=o[t]||[],o[t].push(G({listener:e},n))},t}(),K=function(t,e){return(K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var E=function(){return(E=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function e(t){return 180*(e=[t[0].clientX,t[0].clientY],t=[t[1].clientX,t[1].clientY],n=t[0]-e[0],t=t[1]-e[1],(0<=(e=Math.atan2(t,n))?e:e+2*Math.PI)/Math.PI);var e,n}function y(t){if(!t)return[];if(t.touches){for(var e=t.touches,n=Math.min(e.length,2),o=[],i=0;i<n;++i)o.push(U(e[i]));return o}return[U(t)]}function $(t,e,n){var o=n.length,t=l(t,o),i=t.clientX,r=t.clientY,s=t.originalClientX,t=t.originalClientY,e=l(e,o),a=e.clientX,e=e.clientY,n=l(n,o);return{clientX:s,clientY:t,deltaX:i-a,deltaY:r-e,distX:i-n.clientX,distY:r-n.clientY}}function n(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function U(t){return{clientX:t.clientX,clientY:t.clientY}}function l(t,e){void 0===e&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},o=0;o<e;++o){var i=t[o];n.originalClientX+="originalClientX"in i?i.originalClientX:i.clientX,n.originalClientY+="originalClientY"in i?i.originalClientY:i.clientY,n.clientX+=i.clientX,n.clientY+=i.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var b=function(){function t(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}return t.prototype.getAngle=function(t){return e(t=void 0===t?this.prevClients:t)},t.prototype.getRotation=function(t){return e(t=void 0===t?this.prevClients:t)-e(this.startClients)},t.prototype.getPosition=function(t,e){var n=$((t=void 0===t?this.prevClients:t)||this.prevClients,this.prevClients,this.startClients),o=n.deltaX,i=n.deltaY;return this.movement+=Math.sqrt(o*o+i*i),this.prevClients=t,n},t.prototype.getPositions=function(n){void 0===n&&(n=this.prevClients);var o=this.prevClients;return this.startClients.map(function(t,e){return $([n[e]],[o[e]],[t])})},t.prototype.getMovement=function(t){var e,n,o=this.movement;return t?(t=l(t,this.length),e=l(this.prevClients,this.length),n=t.clientX-e.clientX,t=t.clientY-e.clientY,Math.sqrt(n*n+t*t)+o):o},t.prototype.getDistance=function(t){return n(t=void 0===t?this.prevClients:t)},t.prototype.getScale=function(t){return n(t=void 0===t?this.prevClients:t)/n(this.startClients)},t.prototype.move=function(e,n){this.startClients.forEach(function(t){t.clientX-=e,t.clientY-=n}),this.prevClients.forEach(function(t){t.clientX-=e,t.clientY-=n})},t}(),J=["textarea","input"],Q=function(r){function t(){this.constructor=e}var e,n;function o(t,e){void 0===e&&(e={});var n,v=r.call(this)||this,t=(v.options={},v.flag=!1,v.pinchFlag=!1,v.data={},v.isDrag=!1,v.isPinch=!1,v.clientStores=[],v.targets=[],v.prevTime=0,v.doubleFlag=!1,v._useMouse=!1,v._useTouch=!1,v._useDrag=!1,v._dragFlag=!1,v._isTrusted=!1,v._isMouseEvent=!1,v._isSecondaryButton=!1,v._preventMouseEvent=!1,v._prevInputEvent=null,v._isDragAPI=!1,v._isIdle=!0,v._window=window,v.onDragStart=function(t,e){if(void 0===e&&(e=!0),v.flag||!1!==t.cancelable){var n=-1<=t.type.indexOf("drag");if(!v.flag||!n){v._isDragAPI=!0;var n=v.options,o=n.container,i=n.pinchOutside,r=n.preventWheelClick,s=n.preventRightClick,a=n.preventDefault,l=n.checkInput,c=n.dragFocusedInput,h=n.preventClickEventOnDragStart,u=n.preventClickEventOnDrag,n=n.preventClickEventByCondition,p=v._useTouch,f=!v.flag;if(v._isSecondaryButton=3===t.which||2===t.button,r&&(2===t.which||1===t.button)||s&&(3===t.which||2===t.button))return v.stop(),!1;if(f){r=v._window.document.activeElement,s=t.target;if(s){var g=s.tagName.toLowerCase(),g=-1<J.indexOf(g),d=s.isContentEditable;if(g||d){if(l||!c&&r===s)return!1;if(r&&(r===s||d&&r.isContentEditable&&r.contains(s))){if(!c)return!1;s.blur()}}else(a||"touchstart"===t.type)&&r&&(g=r.tagName.toLowerCase(),(r.isContentEditable||-1<J.indexOf(g))&&r.blur());(h||u||n)&&S(v._window,"click",v._onClick,!0)}v.clientStores=[new b(y(t))],v._isIdle=!1,v.flag=!0,v.isDrag=!1,v._isTrusted=e,v._dragFlag=!0,v._prevInputEvent=t,v.data={},v.doubleFlag=I()-v.prevTime<200,v._isMouseEvent=(l=t)&&(-1<l.type.indexOf("mouse")||"button"in l),!v._isMouseEvent&&v._preventMouseEvent&&(v._preventMouseEvent=!1),!1===(v._preventMouseEvent||v.emit("dragStart",E(E({data:v.data,datas:v.data,inputEvent:t,isMouseEvent:v._isMouseEvent,isSecondaryButton:v._isSecondaryButton,isTrusted:e,isDouble:v.doubleFlag},v.getCurrentStore().getPosition()),{preventDefault:function(){t.preventDefault()},preventDrag:function(){v._dragFlag=!1}})))&&v.stop(),v._isMouseEvent&&v.flag&&a&&t.preventDefault()}if(!v.flag)return!1;d=0;f?(v._attchDragEvent(),p&&i&&(d=setTimeout(function(){S(o,"touchstart",v.onDragStart,{passive:!1})}))):p&&i&&z(o,"touchstart",v.onDragStart),v.flag&&((c=t).touches&&2<=c.touches.length)&&(clearTimeout(d),f&&t.touches.length!==t.changedTouches.length||v.pinchFlag||v.onPinchStart(t))}}},v.onDrag=function(t,e){if(v.flag){var n=v.options.preventDefault,n=(!v._isMouseEvent&&n&&t.preventDefault(),y(v._prevInputEvent=t)),o=v.moveClients(n,t,!1);if(v._dragFlag){if(v.pinchFlag||o.deltaX||o.deltaY)if(!1===(v._preventMouseEvent||v.emit("drag",E(E({},o),{isScroll:!!e,inputEvent:t}))))return void v.stop();v.pinchFlag&&v.onPinch(t,n)}v.getCurrentStore().getPosition(n,!0)}},v.onDragEnd=function(t){var e,n,o,i,r,s;v.flag&&(s=(o=v.options).pinchOutside,e=o.container,r=o.preventClickEventOnDrag,i=o.preventClickEventOnDragStart,o=o.preventClickEventByCondition,n=v.isDrag,(r||i||o)&&requestAnimationFrame(function(){v._allowClickEvent()}),o||i||!r||n||v._allowClickEvent(),v._useTouch&&s&&z(e,"touchstart",v.onDragStart),v.pinchFlag&&v.onPinchEnd(t),0!==(o=null!=t&&t.touches?y(t):[]).length&&v.options.keepDragging?v._addStore(new b(o)):v.flag=!1,i=v._getPosition(),r=I(),s=!n&&v.doubleFlag,v._prevInputEvent=null,v.prevTime=n||s?0:r,v.flag||(v._dettachDragEvent(),v._preventMouseEvent||v.emit("dragEnd",E({data:v.data,datas:v.data,isDouble:s,isDrag:n,isClick:!n,isMouseEvent:v._isMouseEvent,isSecondaryButton:v._isSecondaryButton,inputEvent:t,isTrusted:v._isTrusted},i)),v.clientStores=[],v._isMouseEvent||(v._preventMouseEvent=!0,requestAnimationFrame(function(){requestAnimationFrame(function(){v._preventMouseEvent=!1})})),v._isIdle=!0))},v.onBlur=function(){v.onDragEnd()},v._allowClickEvent=function(){z(v._window,"click",v._onClick,!0)},v._onClick=function(t){v._allowClickEvent(),v._preventMouseEvent=!1;var e=v.options.preventClickEventByCondition;null!=e&&e(t)||(t.stopPropagation(),t.preventDefault())},v._onContextMenu=function(t){v.options.preventRightClick?v.onDragEnd(t):t.preventDefault()},v._passCallback=function(){},[].concat(t)),o=t[0],i=(v._window=(i=o)&&"postMessage"in i&&"blur"in i&&"self"in i?o:f(o),v.options=E({checkInput:!1,container:!o||"document"in o?o:f(o),preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},e),v.options),o=i.container,e=i.events,i=i.checkWindowBlur;return v._useDrag=-1<e.indexOf("drag"),v._useTouch=-1<e.indexOf("touch"),v._useMouse=-1<e.indexOf("mouse"),v.targets=t,v._useDrag&&t.forEach(function(t){S(t,"dragstart",v.onDragStart)}),v._useMouse&&(t.forEach(function(t){S(t,"mousedown",v.onDragStart),S(t,"mousemove",v._passCallback)}),S(o,"contextmenu",v._onContextMenu)),i&&S(f(),"blur",v.onBlur),v._useTouch&&(n={passive:!1},t.forEach(function(t){S(t,"touchstart",v.onDragStart,n),S(t,"touchmove",v._passCallback,n)})),v}return K(e=o,n=r),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t),o.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},o.prototype.getMovement=function(t){return this.getCurrentStore().getMovement(t)+this.clientStores.slice(1).reduce(function(t,e){return t+e.movement},0)},o.prototype.isDragging=function(){return this.isDrag},o.prototype.isIdle=function(){return this._isIdle},o.prototype.isFlag=function(){return this.flag},o.prototype.isPinchFlag=function(){return this.pinchFlag},o.prototype.isDoubleFlag=function(){return this.doubleFlag},o.prototype.isPinching=function(){return this.isPinch},o.prototype.scrollBy=function(t,e,n,o){void 0===o&&(o=!0),this.flag&&(this.clientStores[0].move(t,e),o&&this.onDrag(n,!0))},o.prototype.move=function(t,e){var n=t[0],o=t[1],t=this.getCurrentStore().prevClients;return this.moveClients(t.map(function(t){var e=t.clientX,t=t.clientY;return{clientX:e+n,clientY:t+o,originalClientX:e,originalClientY:t}}),e,!0)},o.prototype.triggerDragStart=function(t){this.onDragStart(t,!1)},o.prototype.setEventData=function(t){var e,n=this.data;for(e in t)n[e]=t[e];return this},o.prototype.setEventDatas=function(t){return this.setEventData(t)},o.prototype.getCurrentEvent=function(t){return void 0===t&&(t=this._prevInputEvent),E(E({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:t})},o.prototype.getEventData=function(){return this.data},o.prototype.getEventDatas=function(){return this.data},o.prototype.unset=function(){var e=this,t=this.targets,n=this.options.container;this.off(),z(this._window,"blur",this.onBlur),this._useDrag&&t.forEach(function(t){z(t,"dragstart",e.onDragStart)}),this._useMouse&&(t.forEach(function(t){z(t,"mousedown",e.onDragStart)}),z(n,"contextmenu",this._onContextMenu)),this._useTouch&&(t.forEach(function(t){z(t,"touchstart",e.onDragStart)}),z(n,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},o.prototype.onPinchStart=function(t){var e=this,n=this.options.pinchThreshold;this.isDrag&&this.getMovement()>n||(n=new b(y(t)),this.pinchFlag=!0,this._addStore(n),!1===this.emit("pinchStart",E(E({data:this.data,datas:this.data,angle:n.getAngle(),touches:this.getCurrentStore().getPositions()},n.getPosition()),{inputEvent:t,isTrusted:this._isTrusted,preventDefault:function(){t.preventDefault()},preventDrag:function(){e._dragFlag=!1}}))&&(this.pinchFlag=!1))},o.prototype.onPinch=function(t,e){var n;!this.flag||!this.pinchFlag||e.length<2||(n=this.getCurrentStore(),this.isPinch=!0,this.emit("pinch",E(E({data:this.data,datas:this.data,movement:this.getMovement(e),angle:n.getAngle(e),rotation:n.getRotation(e),touches:n.getPositions(e),scale:n.getScale(e),distance:n.getDistance(e)},n.getPosition(e)),{inputEvent:t,isTrusted:this._isTrusted})))},o.prototype.onPinchEnd=function(t){var e,n;this.pinchFlag&&(e=this.isPinch,this.isPinch=!1,this.pinchFlag=!1,n=this.getCurrentStore(),this.emit("pinchEnd",E(E({data:this.data,datas:this.data,isPinch:e,touches:n.getPositions()},n.getPosition()),{inputEvent:t})))},o.prototype.getCurrentStore=function(){return this.clientStores[0]},o.prototype.moveClients=function(t,e,n){var n=this._getPosition(t,n),o=this.isDrag,i=((n.deltaX||n.deltaY)&&(this.isDrag=!0),!1);return!o&&this.isDrag&&(i=!0),E(E({data:this.data,datas:this.data},n),{movement:this.getMovement(t),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:e,isTrusted:this._isTrusted,isFirstDrag:i})},o.prototype._addStore=function(t){this.clientStores.splice(0,0,t)},o.prototype._getPosition=function(t,e){var t=this.getCurrentStore().getPosition(t,e),e=this.clientStores.slice(1).reduce(function(t,e){e=e.getPosition();return t.distX+=e.distX,t.distY+=e.distY,t},t),n=e.distX,e=e.distY;return E(E({},t),{distX:n,distY:e})},o.prototype._attchDragEvent=function(){var t=this._window,e=this.options.container,n={passive:!1};this._isDragAPI&&(S(e,"dragover",this.onDrag,n),S(t,"dragend",this.onDragEnd)),this._useMouse&&(S(e,"mousemove",this.onDrag),S(t,"mouseup",this.onDragEnd)),this._useTouch&&(S(e,"touchmove",this.onDrag,n),S(t,"touchend",this.onDragEnd,n),S(t,"touchcancel",this.onDragEnd,n))},o.prototype._dettachDragEvent=function(){var t=this._window,e=this.options.container;this._isDragAPI&&(z(e,"dragover",this.onDrag),z(t,"dragend",this.onDragEnd)),this._useMouse&&(z(e,"mousemove",this.onDrag),z(t,"mouseup",this.onDragEnd)),this._useTouch&&(z(e,"touchstart",this.onDragStart),z(e,"touchmove",this.onDrag),z(t,"touchend",this.onDragEnd),z(t,"touchcancel",this.onDragEnd))},o}(t);var tt=function(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return e>>>0};function et(n,t,e){return e.original?t:t.replace(/([^};{\s}][^};{]*|^\s*){/gm,function(t,e){e=e.trim();return(e?Z(e,","):[""]).map(function(t){t=t.trim();return 0===t.indexOf("@")?t:-1<t.indexOf(":global")?t.replace(/\:global/g,""):-1<t.indexOf(":host")?"".concat(t.replace(/\:host/g,".".concat(n))):t?".".concat(n," ").concat(t):".".concat(n)}).join(", ")+" {"})}function nt(t,e){for(var n=t.length,o=0;o<n;++o)if(e(t[o],o))return!0;return!1}function ot(t,e){for(var n=t.length,o=0;o<n;++o)if(e(t[o],o))return t[o];return null}function it(t){if(void 0===t){if("undefined"==typeof navigator||!navigator)return"";t=navigator.userAgent||""}return t.toLowerCase()}function rt(t,e){try{return new RegExp(t,"g").exec(e)}catch(t){return null}}function st(t){return t.replace(/_/g,".")}function o(t,n){var o=null,i="-1";return nt(t,function(t){var e=rt("("+t.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",n);return e&&!t.brand&&(o=t,i=e[3]||"-1",t.versionAlias?i=t.versionAlias:t.versionTest&&(e=t.versionTest.toLowerCase(),i=((e=rt("("+e+")((?:\\/|\\s|:)([0-9|\\.|_]+))",n))?e[3]:"")||i),i=st(i),1)}),{preset:o,version:i}}function i(t,n){var o={brand:"",version:"-1"};return nt(t,function(t){var e=at(n,t);return e&&(o.brand=t.id,o.version=t.versionAlias||e.version,"-1"!==o.version)}),o}function at(t,e){return ot(t,function(t){t=t.brand;return rt(""+e.test,t.toLowerCase())})}var c=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],lt=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],g=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],ct=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],C=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function ht(t){return!!o(ct,t).preset}function ut(t){return 1-Math.pow(1-t,3)}var D,Y,X,T,x,M,pt,O,A,ft,gt,dt,lt="safari"===(void 0===D&&function(){var t;if("undefined"!=typeof navigator&&navigator&&navigator.userAgentData)return(t=(t=navigator.userAgentData).brands||t.uaList)&&t.length}()?(X=((O=navigator.userAgentData).uaList||O.brands).slice(),T=Y&&Y.fullVersionList,x=O.mobile||!1,M=X[0],pt=(Y&&Y.platform||O.platform||navigator.platform).toLowerCase(),O={name:M.brand,version:M.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!i(ct,X).brand||ht(it())},M={name:"unknown",version:"-1",majorVersion:-1},O.webkit=!O.chromium&&nt(g,function(t){return at(X,t)}),A=i(lt,X),O.chromium=!!A.brand,O.chromiumVersion=A.version,O.chromium||(A=i(g,X),O.webkit=!!A.brand,O.webkitVersion=A.version),A=ot(C,function(t){return new RegExp(""+t.test,"g").exec(pt)}),M.name=A?A.id:"",Y&&(M.version=Y.platformVersion),T&&T.length?(A=i(c,T),O.name=A.brand||O.name,O.version=A.version||O.version):(T=i(c,X),O.name=T.brand||O.name,O.version=T.brand&&Y?Y.uaFullVersion:T.version),O.webkit&&(M.name=x?"ios":"mac"),"ios"===M.name&&O.webview&&(O.version="-1"),M.version=st(M.version),O.version=st(O.version),M.majorVersion=parseInt(M.version,10),O.majorVersion=parseInt(O.version,10),{browser:O,os:M,isMobile:x,isHints:!0}):(A=it(A=D),Y=!!/mobi/g.exec(A),T={name:"unknown",version:"-1",majorVersion:-1,webview:ht(A),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},O={name:"unknown",version:"-1",majorVersion:-1},x=(M=o(c,A)).preset,M=M.version,c=(D=o(C,A)).preset,D=D.version,C=o(lt,A),T.chromium=!!C.preset,T.chromiumVersion=C.version,T.chromium||(C=o(g,A),T.webkit=!!C.preset,T.webkitVersion=C.version),c&&(O.name=c.id,O.version=D,O.majorVersion=parseInt(D,10)),x&&(T.name=x.id,T.version=M,T.webview&&"ios"===O.name&&"safari"!==T.name&&(T.webview=!1)),T.majorVersion=parseInt(T.version,10),{browser:T,os:O,isMobile:Y,isHints:!1})).browser.name,g="infinite-viewer-",vt="".concat(g,"wrapper"),mt="".concat(g,"scroll-area"),wt="".concat(g,"scroll-bar"),_t="".concat(g,"horizontal-scroll-bar"),St="".concat(g,"vertical-scroll-bar"),zt="".concat(g,"scroll-thumb"),Et=(dt=g,ft="\n{\n    position: relative;\n    overscroll-behavior: none;\n}\n.wrapper {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    overflow: auto;\n    scrollbar-width: none;\n    top: 0;\n    left: 0;\n    will-change: scroll-position;\n}\n.restrict-wrapper {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n}\n.wrapper::-webkit-scrollbar {\n    display: none;\n}\n.scroll-area {\n    position:absolute;\n    top:0;\n    left:0;\n    transform-origin: 0 0;\n}\n.scroll-bar {\n    position:absolute;\n    width: 10px;\n    height: 10px;\n    box-sizing: border-box;\n    right: 0;\n    bottom: 0;\n    overflow: hidden;\n}\n.horizontal-scroll-bar {\n    width: calc(100% - 20px);\n    right: 10px;\n    height: 14px;\n}\n.vertical-scroll-bar {\n    height: calc(100% - 20px);\n    bottom: 10px;\n    width: 14px;\n}\n.scroll-thumb {\n    position:relative;\n    opacity: 0.7;\n    background: #333;\n    border-radius: 3px;\n    left: 0px;\n    top: 0px;\n    z-index: 10;\n    width: 6px;\n    height: 6px;\n    transition: all ease 0.2s;\n    opacity: 0;\n}\n.scroll-bar:hover .scroll-thumb {\n    border-radius: 5px;\n    opacity: 1;\n}\n.horizontal-scroll-bar .scroll-thumb {\n    margin: 4px 0px;\n    transition-property: opacity, margin, height, border-radius;\n}\n.vertical-scroll-bar .scroll-thumb {\n    margin: 0px 4px;\n    transition-property: opacity, margin, width, border-radius;\n}\n.horizontal-scroll-bar:hover .scroll-thumb {\n    height: 10px;\n    margin: 2px 0px;\n}\n.vertical-scroll-bar:hover .scroll-thumb {\n    width: 10px;\n    margin: 0px 2px;\n}\n".replace(/([^}{]*){/gm,function(t,e){return e.replace(/\.([^{,\s\d.]+)/g,"."+dt+"$1")+"{"}),{className:gt="rCS"+tt(ft).toString(36),inject:function(t,e){void 0===e&&(e={});var n,o,i,r=function(t){if(t&&t.getRootNode){t=t.getRootNode();if(11===t.nodeType)return t}}(t),s=(r||t.ownerDocument||document).querySelector('style[data-styled-id="'.concat(gt,'"]'));return s?(n=parseFloat(s.getAttribute("data-styled-count"))||0,s.setAttribute("data-styled-count","".concat(n+1))):(n=gt,o=ft,e=e,r=r,(i=(t=p(t=t)).createElement("style")).setAttribute("type","text/css"),i.setAttribute("data-styled-id",n),i.setAttribute("data-styled-count","1"),e.nonce&&i.setAttribute("nonce",e.nonce),i.innerHTML=et(n,o,e),(r||t.head||t.body).appendChild(i),s=i),{destroy:function(){var t,e=parseFloat(s.getAttribute("data-styled-count"))||0;e<=1?(s.remove?s.remove():null!=(t=s.parentNode)&&t.removeChild(s),s=null):s.setAttribute("data-styled-count","".concat(e-1))}}}}),P={margin:500,threshold:100,zoom:1,zoomX:1,zoomY:1,rangeX:[-1/0,1/0],rangeY:[-1/0,1/0],rangeOffsetX:[0,0],rangeOffsetY:[0,0],wrapperElement:null,scrollAreaElement:null,horizontalScrollElement:null,verticalScrollElement:null,usePinch:!1,useAutoZoom:!1,useMouseDrag:!1,pinchThreshold:30,cspNonce:"",maxPinchWheel:1/0,wheelScale:.01,displayHorizontalScroll:!0,displayVerticalScroll:!0,useTransform:!0,useWheelPinch:!0,zoomRange:[.001,1/0],wheelPinchKey:"ctrl",useWheelScroll:lt,zoomOffsetX:"50%",zoomOffsetY:"50%",translateZ:0,useGesture:!0,useResizeObserver:!1,pinchDirection:"all",preventWheelClick:!0,useBounceScrollBar:!1,useOverflowScroll:!1},yt={horizontal:{pos:"Left",coord:"X",size:"Width"},vertical:{pos:"Top",coord:"Y",size:"Height"}},bt=Et.className,Ct=["margin","threshold","zoomOffsetX","zoomOffsetY","zoom","zoomX","zoomY","rangeX","rangeY","rangeOffsetX","rangeOffsetY","usePinch","useMouseDrag","pinchThreshold","maxPinchWheel","wheelScale","displayVerticalScroll","displayHorizontalScroll","translateZ","useAutoZoom","wheelPinchKey","zoomRange","zoomRangeX","zoomRangeY","pinchDirection","useOverflowScroll"],C=k(k([],Ct,!0),["preventWheelClick","useWheelPinch","useWheelScroll","useGesture","cspNonce","wrapperElement","scrollAreaElement","verticalScrollElement","horizontalScrollElement","useResizeObserver","wheelContainer","useBounceScrollBar"],!1);function Dt(t,e){t=Math.sqrt(t[0]*t[0]+t[1]*t[1]);return Math.abs(t/e)}function R(t){return Math.abs(t)}function Yt(t,e){return null!=t?t:e}function Xt(i,r,t){function s(){var t=Date.now(),e=t-c,n=l((e=a<e?a:e)/a),o=l((h-c)/a);h=t,i(n-o),a<=e||r(s)}var a=t.duration,l=t.easing||function(t){return 1-Math.pow(1-t,3)},c=Date.now(),h=c;r(s)}var Tt,xt=function(s){function t(t,e,n){var o,r=s.call(this)||this,e=(r.type=e,r.isAppend=!1,r.size=0,r.scrollSize=0,r.isHorizontal=!1,r._onDragStart=function(o){var i=r.isHorizontal,t=o.inputEvent.target,e=o.datas,t=r.thumbElement===t;t||setTimeout(function(){requestAnimationFrame(function(){var t=r.thumbElement.getBoundingClientRect(),e=t[i?"left":"top"],t=e+t[i?"width":"height"],n=o[i?"clientX":"clientY"];e<=n&&n<=t||(t=(t=r.size)*t/r.scrollSize,r.scrollBy(e<n?t:-t))})},100),e.isThumb=t,o.inputEvent.stopPropagation(),o.inputEvent.preventDefault()},r._onDrag=function(t){t.datas.isThumb&&r.scrollBy(r.isHorizontal?t.deltaX:t.deltaY)},r._onWheel=function(t){var e=r.isHorizontal?t.deltaX:t.deltaY;e&&t.preventDefault(),r.trigger("scroll",{delta:e})},"horizontal"===e),t=p(t),i=n;return n?o=n.querySelector(".".concat(zt)):(i=t.createElement("div"),o=t.createElement("div"),i.insertBefore(o,null),r.isAppend=!0),h(i,e?_t:St),h(i,wt),h(o,zt),r.thumbElement=o,r.barElement=i,r.isHorizontal=e,r.gesto=new Q(i,{container:f(t)}).on("dragStart",function(t){return r._onDragStart(t)}).on("drag",function(t){return r._onDrag(t)}),S(r.barElement,"wheel",r._onWheel,{passive:!1}),r}r(t,s);var e=t.prototype;return e.scrollBy=function(t,e){var n=t/this.size;this.trigger("scroll",{delta:e?t:this.scrollSize*n})},e.render=function(t,e,n,o){this.size=n,this.scrollSize=o;var i=t&&(t=o-n,0<((i=.001)?(r=1/i,Math.round(t/i)/r):t))?1:0,r=this.isHorizontal?["X","width"]:["Y","height"],t=r[0],s=r[1],n=n/o*100,e=Math.max(0,e)/o*100;this.thumbElement.style.cssText+="".concat(s,": ").concat(n,"%;opacity: ").concat(i,";")+"transform: translate".concat(t,"(").concat(100/n*e,"%)")},e.destroy=function(){z(this.barElement,"wheel",this._onWheel),this.gesto.off(),this.off()},t}(t),Mt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(function(o){function t(t,e,n){void 0===e&&(e={}),void 0===n&&(n={});var a=o.call(this)||this;return a._containerElement=t,a.offsetX=0,a.offsetY=0,a.containerWidth=0,a.containerHeight=0,a.viewportWidth=0,a.viewportHeight=0,a.viewportScrollWidth=0,a.viewportScrollHeight=0,a.scrollLeft=0,a.scrollTop=0,a._scrollTimer=0,a._zoomTimer=0,a._viewportElement=null,a._wheelContainerElement=null,a.dragFlag=!1,a.isLoop=!1,a._tempScale=[1,1],a._tempRect=null,a._tempRectTimer=null,a._onDestroys=[],a._asLeft=0,a._asTop=0,a.resize=function(){var t=a._containerElement,e=t.offsetWidth,t=t.offsetHeight,n=a._viewportElement,o=n.offsetWidth,i=n.offsetHeight,r=n.scrollWidth,n=n.scrollHeight;a.containerWidth=e,a.containerHeight=t,a.viewportWidth=o,a.viewportHeight=i,a.viewportScrollWidth=Math.max(o,r),a.viewportScrollHeight=Math.max(i,n),a.render(),a._scrollBy(0,0)},a._onScroll=function(){var t=a.wrapperElement,e=t.scrollLeft,t=t.scrollTop,n=a.zoom,n=void 0===n?P.zoom:n,o=e-a.scrollLeft,i=t-a.scrollTop,r=a.getScrollLeft(),s=a.getScrollTop();a.isLoop&&(a.isLoop=!1),a.scrollLeft=e,a.scrollTop=t,a.scrollTo(r+o/n,s+i/n)},a.onWheel=function(t){var e=a.options,n=e.pinchDirection,o=e.maxPinchWheel||1/0,i=t["".concat(a.wheelPinchKey,"Key")]||t.ctrlKey;if(e.useWheelPinch&&i){i=0<=(r=t.deltaY)?1:-1,o=Math.min(o,Math.abs(r)),i=-(r=i*o),i=Math.max(1+i*(e.wheelScale||.01),1e-6);clearTimeout(a._tempRectTimer),a._tempRectTimer=window.setTimeout(function(){a._tempRect=null},100),a._triggerPinch({distance:o,scale:i,rotation:0,zoom:a.zoom*i,zoomX:a.zoomX*("vertical"===n?1:i),zoomY:a.zoomY*("horizontal"===n?1:i),inputEvent:t,isWheel:!0,clientX:t.clientX,clientY:t.clientY,ratioX:0,ratioY:0})}else{if(!e.useWheelScroll)return;var o=t.deltaX,r=t.deltaY;t.shiftKey&&!o&&(o=r,r=0),a.scrollBy(o/a.zoomX,r/a.zoomY)}t.preventDefault()},a.onGestureStart=function(t){a._tempScale=[a.zoomX,a.zoomY],a._setClientRect(),t.preventDefault()},a.onGestureChange=function(t){var e,n,o,i;t.preventDefault(),a.gesto.isFlag()||!a._tempScale?a._tempScale=[1,1]:(e=t.scale,n=a._tempScale[0],o=a._tempScale[1],i=a.options.pinchDirection,a._triggerPinch({distance:0,scale:e,rotation:t.rotation,inputEvent:t,isWheel:!0,zoom:(n+o)*e/2,zoomX:n*("vertical"===i?1:e),zoomY:o*("horizontal"===i?1:e),clientX:t.clientX,clientY:t.clientY,ratioX:0,ratioY:0}))},a.onGestureEnd=function(){},N(e)?(a._viewportElement=e,a.options=u(u({},P),n)):(a._viewportElement=t.children[0],a.options=u(u({},P),e)),a.init(),a}r(t,o);var n,i,e=t.prototype;return e.getContainer=function(){return this._containerElement},e.getWheelContainer=function(){return this._wheelContainerElement},e.getViewport=function(){return this._viewportElement},e.getWrapper=function(){return this.wrapperElement},e.geScrollArea=function(){return this.scrollAreaElement},e.destroy=function(){this.off(),this.gesto.unset(),this.verticalScrollbar.destroy(),this.horizontalScrollbar.destroy(),this.injectResult.destroy();var t=this._containerElement;this._onDestroys.forEach(function(t){t()}),z(this.wrapperElement,"scroll",this._onScroll),z(this._wheelContainerElement,"wheel",this.onWheel),z(t,"gesturestart",this.onGestureStart),z(t,"gesturechange",this.onGestureChange),z(t,"gesturesend",this.onGestureEnd),this.gesto=null,this.injectResult=null,this._containerElement=null,this._viewportElement=null,this.options=null},e.getScrollTop=function(t){var e=!1,n=!1,t=(a(t=void 0===t?{}:t)?(e=t.range,n=t.absolute):e=t,this.zoomY),e=this.scrollTop/t+this.offsetY+(e?R(this.getRangeY()[0]):0);return n?e*t:e},e.getScrollLeft=function(t){var e=!1,n=!1,t=(a(t=void 0===t?{}:t)?(e=t.range,n=t.absolute):e=t,this.zoomX),e=this.scrollLeft/t+this.offsetX+(e?R(this.getRangeX()[0]):0);return n?e*t:e},e.getScrollWidth=function(t){var e=this._getScrollRangeX(),n=this.zoomX,e=this.containerWidth/n+R(e[0])+e[1];return t?e:e*n},e.getScrollHeight=function(t){var e=this._getScrollRangeY(),n=this.zoomY,e=this.containerHeight/n+R(e[0])+e[1];return t?e:e*n},e.scrollCenter=function(t){void 0===t&&(t={}),this.resize();var e=this.zoomX,n=this.zoomY,o=-(this.containerWidth/e-this.viewportWidth)/2,i=-(this.containerHeight/n-this.viewportHeight)/2;return t.absolute&&(o*=e,i*=n),!1===t.horizontal&&(o=this.getScrollLeft()),!1===t.vertical&&(i=this.getScrollTop()),this.scrollTo(o,i,t)},e.setTo=function(t){var e=t.x,e=void 0===e?this.getScrollLeft():e,n=t.y,n=void 0===n?this.getScrollTop():n,o=t.zoom,o=void 0===o?[this.getZoomX(),this.getZoomY()]:o,i=t.duration,r=this.zoomX,s=this.zoomY,a=this.zoomRange,l=this.zoomOffsetX,l=void 0===l?P.zoomOffsetX:l,c=this.zoomOffsetY,c=void 0===c?P.zoomOffsetY:c,t=("zoomOffsetX"in t&&(l=t.zoomOffsetX),"zoomOffsetY"in t&&(c=t.zoomOffsetY),d(o)?o:[o,o]),h=t[0],t=t[1],u=this.zoomRangeX||a,a=this.zoomRangeY||a,h=_(h,u[0],u[1]),u=_(t,a[0],a[1]),t=v("".concat(l),this.viewportWidth)*(1/r-1/h),a=v("".concat(c),this.viewportHeight)*(1/s-1/u);this.scrollTo(e-t,n-a,{duration:i}),this.setZoom(o,{zoomOffsetX:l,zoomOffsetY:c,duration:i,zoomBase:"fixed"})},e.setBy=function(t){var e=t.x,e=void 0===e?0:e,n=t.y,n=void 0===n?0:n,o=t.zoom,o=void 0===o?[0,0]:o,o=d(o)?o:[o,o],i=o[0],o=o[1];this.setTo(u(u({},t),{x:this.getScrollLeft()+e,y:this.getScrollTop()+n,zoom:[this.zoomX+i,this.zoomY+o]}))},e.scrollBy=function(t,e,n){var o,i;return this._pauseScrollAnimation(),n&&n.duration?(this._startScrollAnimation([t,e],n),!0):(o=this.getScrollLeft(),i=this.getScrollTop(),null!=n&&n.absolute&&(o*=this.zoomX,i*=this.zoomY),this._scrollTo(o+t,i+e,n))},e.scrollTo=function(t,e,n){var o,i;return this._pauseScrollAnimation(),n&&n.duration?(o=this.getScrollLeft(),i=this.getScrollTop(),null!=n&&n.absolute&&(o*=this.zoomX,i*=this.zoomY),this.scrollBy(t-o,e-i,n)):this._scrollTo(t,e,n)},e.zoomBy=function(t,e){this._pauseZoomAnimation();var t=d(t)?t:[t,t],n=t[0],t=t[1];e&&e.duration?this._startZoomAnimation([n,t],e):this._setZoom([this.zoomX+n,this.zoomY+t],e)},e.setZoom=function(t,e){var n,o;this._pauseZoomAnimation(),e&&e.duration?(n=(o=d(t)?t:[t,t])[0],o=o[1],this._startZoomAnimation([n-this.zoomX,o-this.zoomY],e)):this._setZoom(t,e)},e.getViewportWidth=function(){return this.viewportWidth},e.getViewportHeight=function(){return this.viewportWidth},e.getViewportScrollWidth=function(){return this.viewportScrollWidth},e.getViewportScrollHeight=function(){return this.viewportScrollHeight},e.getContainerWidth=function(){return this.containerWidth},e.getContainerHeight=function(){return this.containerHeight},e.getZoom=function(){return(this.zoomX+this.zoomY)/2},e.getZoomX=function(){return this.zoomX},e.getZoomY=function(){return this.zoomY},e.getRangeX=function(t,e){return this._getRangeCoord("horizontal",t,e)},e.getRangeY=function(t,e){return this._getRangeCoord("vertical",t,e)},e.init=function(){var t,a=this,e=this._containerElement,l=this.options,n=p(e),o=f(e),i=l.wrapperElement||e.querySelector(".".concat(vt)),r=l.scrollAreaElement||e.querySelector(".".concat(mt)),s=l.horizontalScrollElement||e.querySelector(".".concat(_t)),c=l.verticalScrollElement||e.querySelector(".".concat(St)),r=(i||((i=n.createElement("div")).insertBefore(this._viewportElement,null),e.insertBefore(i,null)),this.wrapperElement=i,r||(r=n.createElement("div"),i.insertBefore(r,i.firstChild)),this.scrollAreaElement=r,h(e,bt),h(i,vt),h(r,mt),new xt(e,"horizontal",s)),s=new xt(e,"vertical",c),c=(this.horizontalScrollbar=r,this.verticalScrollbar=s,r.on("scroll",function(t){a.scrollBy(t.delta/a.zoomX,0)}),s.on("scroll",function(t){a.scrollBy(0,t.delta/a.zoomY)}),r.isAppend&&e.insertBefore(r.barElement,null),s.isAppend&&e.insertBefore(s.barElement,null),this.injectResult=Et.inject(e,{nonce:this.options.cspNonce}),l.wheelContainer),r=null;c&&(j(c)?r=n.querySelector(c):N(c)?r=c:("value"in c||"current"in c)&&(r=c.current||c.value)),this._wheelContainerElement=r=r||e,this.gesto=new Q(e,{container:f(e),events:["touch","mouse"],preventWheelClick:null==(s=this.options.preventWheelClick)||s}).on("dragStart",function(t){var e=t.inputEvent,n=t.stop,o=t.datas;!a.useMouseDrag&&t.isMouseEvent||(a._pauseScrollAnimation(),(a.dragFlag=!1)===a.trigger("dragStart",t))?n():(e.preventDefault(),o.startEvent=e)}).on("drag",function(t){var e,n,o,i,r,s;!a.options.usePinch||t.isPinch||a.useMouseDrag&&t.isMouseEvent?(a.trigger("drag",u(u({},t),{inputEvent:t.inputEvent})),o=(e=t).deltaX,i=e.deltaY,e=e.datas,r=Date.now(),(s=e.speed)?(n=r-e.time,e.speed=[s[0]/2+o/n,s[1]/2+i/n]):(e.speed=[0,0],e.time=r),a.scrollBy(-t.deltaX/a.zoomX,-t.deltaY/a.zoomY)):!a.dragFlag&&t.movement>l.pinchThreshold&&(a.dragFlag=!0,a.trigger("abortPinch",{inputEvent:t.datas.startEvent||t.inputEvent}))}).on("dragEnd",function(t){a.trigger("dragEnd",{isDrag:t.isDrag,isDouble:t.isDouble,inputEvent:t.inputEvent}),a._startScrollAnimationBySpeed(t.datas.speed)}).on("pinchStart",function(t){var e=t.inputEvent,n=t.datas,t=t.stop;e.preventDefault(),a._pauseScrollAnimation(),!(n.startZoom=[a.zoomX,a.zoomY])===a.trigger("pinchStart",{inputEvent:e})&&t(),a._setClientRect()}).on("pinch",function(t){var e=t.scale,n=a.options.pinchDirection;a._triggerPinch({rotation:t.rotation,distance:t.distance,scale:t.scale,inputEvent:t.inputEvent,isWheel:!1,zoom:t.datas.startZoom*e,zoomX:a.zoomX*("vertical"===n?1:e),zoomY:a.zoomY*("horizontal"===n?1:e),clientX:t.clientX,clientY:t.clientY,ratioX:0,ratioY:0})}).on("pinchEnd",function(){a._tempRect=null}),S(i,"scroll",this._onScroll),l.useResizeObserver?((t=new o.ResizeObserver(function(){a.resize()})).observe(this._viewportElement),t.observe(this._containerElement),this._onDestroys.push(function(){t.disconnect()})):(S(o,"resize",this.resize),this._onDestroys.push(function(){z(o,"resize",a.resize)})),(l.useWheelPinch||l.useWheelScroll)&&S(r,"wheel",this.onWheel,{passive:!1}),l.useGesture&&(S(e,"gesturestart",this.onGestureStart,{passive:!1}),S(e,"gesturechange",this.onGestureChange,{passive:!1})),this.resize()},e.render=function(){var t=this,e=t.offsetX,n=t.offsetY,o=t.zoomX,o=void 0===o?P.zoomX:o,i=t.zoomY,i=void 0===i?P.zoomY:i,r=t.translateZ,r=void 0===r?0:r,t=(t.rangeX,t.rangeY,t.containerWidth,t.containerHeight,this.options.useTransform),t=void 0===t?P.useTransform:t,e=-e*o,n=-n*i,s=(this.scrollAreaElement.style.cssText="width:calc(100% + ".concat(this.getScrollAreaWidth(),"px);")+"height:calc(100% + ".concat(this.getScrollAreaHeight(),"px);"),this._viewportElement.style);s.cssText+=!1===t?"position: relative; left: ".concat(e,"px; top: ").concat(n,"px; "):"transform-origin: 0 0;"+"transform:translate3d(".concat(e,"px, ").concat(n,"px, ").concat(r,"px) scale(").concat(o,", ").concat(i,");"),this.renderScroll()},e.renderScroll=function(){var t,e,n,o,i=this.zoomX,r=this.zoomY,s=this.containerWidth,a=this.containerHeight,l=this.horizontalScrollbar,c=this.verticalScrollbar;this.options.useBounceScrollBar?(t=this.getScrollLeft(!0)*i,n=s+R((i=this.getRangeX(!0))[0])+R(i[1]),e=this.getScrollTop(!0)*r,o=a+R((i=this.getRangeY(!0))[0])+R(i[1]),l.render(this.displayHorizontalScroll,t,s,n),c.render(this.displayVerticalScroll,e,a,o)):(r=this._getScrollRangeX(),i=this._getScrollRangeY(),t=this.getScrollLeft(),e=this.getScrollTop(),n=this.containerWidth+R(r[0])+r[1],o=this.containerHeight+R(i[0])+i[1],l.render(this.displayHorizontalScroll,t-r[0],s,n),c.render(this.displayVerticalScroll,e-i[0],a,o))},e.move=function(t,e){var n=this.wrapperElement;n.scrollLeft=t,n.scrollTop=e},e._startZoomAnimation=function(e,n){var t,o=this;e&&(t=n.duration,Xt(function(t){o._setZoom([o.zoomX+e[0]*t,o.zoomY+e[1]*t],n)},function(t){o._zoomTimer=requestAnimationFrame(t)},{easing:n.easing||ut,duration:t}))},e._startScrollAnimation=function(e,n){var t,o=this;(e[0]||e[1])&&(t=n.duration,Xt(function(t){o._scrollBy(e[0]*t,e[1]*t,n)},function(t){o._scrollTimer=requestAnimationFrame(t)},{easing:n.easing||ut,duration:t}))},e._startScrollAnimationBySpeed=function(t){var e,n;if(t&&(t[0]||t[1]))return e=Dt(t,-6e-4),n=Dt(t=t,n=-6e-4),t=[-t[0]/2*n,-t[1]/2*n],this._startScrollAnimation(t,{duration:e})},e._pauseScrollAnimation=function(){cancelAnimationFrame(this._scrollTimer),this._scrollTimer=0},e._pauseZoomAnimation=function(){cancelAnimationFrame(this._zoomTimer),this._zoomTimer=0},e.getScrollAreaWidth=function(){var t=this.getRangeX(!0),e=t[0],t=t[1];return e||t?2*this.margin:0},e.getScrollAreaHeight=function(){var t=this.getRangeY(!0),e=t[0],t=t[1];return e||t?2*this.margin:0},e._triggerPinch=function(t){var e=t.clientX,n=t.clientY,o=t.zoomX,i=t.zoomY,r=(this.useAutoZoom&&this._zoomByClient([o,i],e,n),this._tempRect||this._setClientRect(),this.zoomRange),s=this.zoomRangeX||r,a=this.zoomRangeY||r,l=this._tempRect,c=l.left,h=l.top,e=(e-c)/l.width*100,c=(n-h)/l.height*100;this.trigger("pinch",u(u({},t),{zoom:_((o+i)/2,r[0],r[1]),zoomX:_(o,s[0],s[1]),zoomY:_(i,a[0],a[1]),ratioX:e,ratioY:c}))},e._setClientRect=function(){var t=this.getContainer().getBoundingClientRect();this._tempRect={left:t.left,top:t.top,width:t.width,height:t.height}},e._zoomByClient=function(t,e,n){this._tempRect||this._setClientRect();var o=this._tempRect,i=o.left,r=o.top,s=o.width,o=o.height,a=this.options,l=a.zoomOffsetX,c=a.zoomOffsetY;a.zoomOffsetX="".concat((e-i)/s*100,"%"),a.zoomOffsetY="".concat((n-r)/o*100,"%"),this._setZoom(t,{zoomBase:"screen"}),a.zoomOffsetX=l,a.zoomOffsetY=c},e._setZoom=function(t,e){var n=(e=void 0===e?{}:e).zoomBase,o=this,i=o.containerWidth,r=o.containerHeight,s=o.zoomX,a=o.zoomY,o=o.zoomRange,l=this.zoomOffsetX,l=void 0===l?P.zoomOffsetX:l,c=this.zoomOffsetY,c=void 0===c?P.zoomOffsetY:c,e=("zoomOffsetX"in e&&(l=e.zoomOffsetX),"zoomOffsetY"in e&&(c=e.zoomOffsetY),this.getScrollLeft()),h=this.getScrollTop(),t=d(t)?t:[t,t],u=t[0],t=t[1],p=this.zoomRangeX||o,o=this.zoomRangeY||o,u=_(u,p[0],p[1]),p=_(t,o[0],o[1]),t=this.options,o=(t.zoomX=u,t.zoomY=p,t.zoom=(u+p)/2,this.getScrollLeft()),t=this.getScrollTop(),f=0,g=0,g="fixed"===n?(f=v("".concat(l),this.viewportWidth),v("".concat(c),this.viewportHeight)):"viewport"===n?(f=(-e+v("".concat(l),this.viewportWidth))*s,(-h+v("".concat(c),this.viewportHeight))*a):(f=v("".concat(l),i),v("".concat(c),r));this._scrollBy(e+f/s-(o+f/u),h+g/a-(t+g/p),{zoom:!!(u-s||p-a)}),this.render()},e._scrollBy=function(t,e,n){var o=this.getScrollLeft(),i=this.getScrollTop();return null!=n&&n.absolute&&(o*=this.zoomX,i*=this.zoomY),this._scrollTo(o+t,i+e,n)},e._scrollTo=function(t,e,n){var o=this,i=this.scrollLeft,r=this.scrollTop,s=null==n?void 0:n.absolute,a=(this._scrollToType("horizontal",t,s),this._scrollToType("vertical",e,s),this.scrollLeft),l=this.scrollTop,c=(this.render(),this.getScrollLeft()),h=this.getScrollTop();return this._emitScrollEvent(c,h,null==n?void 0:n.zoom),Math.round(i)===a&&Math.round(r)===l||(this.isLoop=!0,this.move(a,l),requestAnimationFrame(function(){var t,e;o.isLoop&&(o.isLoop=!1,t=(e=o.wrapperElement).scrollLeft,e=e.scrollTop,o.scrollLeft=t,o.scrollTop=e,a===Math.round(t)&&l===Math.round(e)||o._scrollTo(c,h))}),!1)},e._scrollToType=function(t,e,n){var t=yt[t],o=this.margin,o=void 0===o?P.margin:o,i=this.threshold,i=void 0===i?P.threshold:i,r=this["scroll".concat(t.pos)],s=this["getRange".concat(t.coord)](!0,!0),a=s[0],s=s[1],r=Math.round(r),l=this["getScrollArea".concat(t.size)](),c=this["zoom".concat(t.coord)],n=(n&&(e/=c),e*c);a===s?e=(r=a)/c:n-i<=a?e=(a+(r=Math.max(0,n-a)))/c:s<=n+i?(r=l-(a=Math.max(0,s-n)),e=(s-a)/c):r<i?r+=o:l-i<r&&(r-=o),r=Math.round(r),this["scroll".concat(t.pos)]=r,this["offset".concat(t.coord)]=e-r/c},e._getRangeCoord=function(t,e,n){var o,i=this.margin,i=void 0===i?P.margin:i,r=this.threshold,t=yt[t],s=Yt(this["range".concat(t.coord)],P["range".concat(t.coord)]),a=Yt(this["rangeOffset".concat(t.coord)],P["rangeOffset".concat(t.coord)]),l=this["zoom".concat(t.coord)],n=(o=this["getScroll".concat(t.pos)](),i=i,s=s,r=r,[(n=n)||isFinite(s[0])?s[0]:Math.min(-1,Math.floor(o/i))*i-r,n||isFinite(s[1])?s[1]:Math.max(1,Math.ceil(o/i))*i+r]);return e?[n[0]*l+a[0],this.options.useOverflowScroll?Math.max(this["viewport".concat(t.size)]*l-this["container".concat(t.size)],n[1]*l+a[1]):n[1]*l+a[1]]:[n[0]+a[0],n[1]+a[1]]},e._emitScrollEvent=function(t,e,n){var o=this._asLeft,i=this._asTop;!n&&o===t&&i===e||(this._asLeft=t,this._asTop=e,this.trigger("scroll",{scrollLeft:t,scrollTop:e,zoomX:this.zoomX,zoomY:this.zoomY}))},e._getScrollRangeX=function(){var t=this.getScrollLeft(),e=this.rangeX,n=e[0],e=e[1],n=(this.useOverflowScroll&&isFinite(e)&&(e=Math.max(e,this.viewportWidth-this.containerWidth/this.zoomX)),Math.min(0,isFinite(n)?Math.min(n,t):t)),e=Math.max(0,isFinite(e)?Math.max(e,t):t),t=this.viewportScrollWidth,t=Math.max(this.containerWidth/this.zoomX,t)-t;return[Math.min(0,t+n),e]},e._getScrollRangeY=function(){var t=this.getScrollTop(),e=this.rangeY,n=e[0],e=e[1],n=(this.useOverflowScroll&&isFinite(e)&&(e=Math.max(e,this.viewportHeight-this.containerHeight/this.zoomY)),Math.min(0,isFinite(n)?Math.min(n,t):t)),e=Math.max(0,isFinite(e)?Math.max(e,t):t),t=this.viewportScrollHeight,t=Math.max(this.containerHeight/this.zoomY,t)-t;return[Math.min(0,t+n),e]},function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;0<=a;a--)(i=t[a])&&(s=(r<3?i(s):3<r?i(e,n,s):i(e,n))||s);return 3<r&&s&&Object.defineProperty(e,n,s),s}([(n=Ct,i=function(t,e){var n={enumerable:!0,configurable:!0,get:function(){return this.options[e]}},o="set ".concat(e).replace(/[\s-_]+([^\s-_])/g,function(t,e){return e.toUpperCase()});t[o]?n.set=function(t){this[o](t)}:n.set=function(t){this.options[e]=t},Object.defineProperty(t,e,n)},function(t){var e=t.prototype;n.forEach(function(t){i(e,t)})})],t)}(t)),Ot={__proto__:null,default:Mt,OPTIONS:C,PROPERTIES:Ct,EVENTS:["scroll","abortPinch","dragStart","dragEnd","pinchStart","pinch"],METHODS:["getScrollLeft","getScrollTop","getScrollWidth","getScrollHeight","getContainerWidth","getContainerHeight","getViewportWidth","getViewportHeight","getViewportScrollWidth","getViewportScrollHeight","scrollTo","scrollBy","zoomBy","scrollCenter","getContainer","getViewport","getWrapper","setZoom","getRangeX","getRangeY","resize","getZoom","getZoomX","getZoomY","getWheelContainer","setTo","setBy"],CLASS_NAME:bt};for(Tt in Ot)Mt[Tt]=Ot[Tt];return Mt});
//# sourceMappingURL=infinite-viewer.min.js.map
